var rrweb=function(Q){"use strict";var F;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(F||(F={}));function Qt(e){return e.nodeType===e.ELEMENT_NODE}function We(e){var t=e?.host;return Boolean(t?.shadowRoot===e)}function je(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}var pt=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function qt(){return new pt}function mt(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,c=o||"";return(t[r.toLowerCase()]||t[n])&&(i?c=i(c):c="*".repeat(c.length)),c}var er="__rrweb_original__";function Fn(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var i=t.getImageData,c=er in i?i[er]:i,l=new Uint32Array(c.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(l.some(function(a){return a!==0}))return!1}return!0}var _n=1,Pn=new RegExp("[^a-z0-9-_:]"),Ue=-2;function $n(){return _n++}function Wn(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return Pn.test(t)?"div":t}function ft(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(jn).join(""):null}catch{return null}}function jn(e){var t=e.cssText;if(Un(e))try{t=ft(e.styleSheet)||t}catch{}return t}function Un(e){return"styleSheet"in e}function Vn(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function Gn(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Me,tr,Bn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,zn=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Yn=/^(data:)([^,]*),(.*)/i;function et(e,t){return(e||"").replace(Bn,function(r,n,o,i,c,l){var a=o||c||l,s=n||i||"";if(!a)return r;if(!zn.test(a)||Yn.test(a))return"url(".concat(s).concat(a).concat(s,")");if(a[0]==="/")return"url(".concat(s).concat(Gn(t)+a).concat(s,")");var u=t.split("/"),d=a.split("/");u.pop();for(var p=0,h=d;p<h.length;p++){var f=h[p];f!=="."&&(f===".."?u.pop():u.push(f))}return"url(".concat(s).concat(u.join("/")).concat(s,")")})}var Hn=/^[^ \t\n\r\u000c]+/,Xn=/^[, \t\n\r\u000c]+/;function Zn(e,t){if(t.trim()==="")return t;var r=0;function n(s){var u,d=s.exec(t.substring(r));return d?(u=d[0],r+=u.length,u):""}for(var o=[];n(Xn),!(r>=t.length);){var i=n(Hn);if(i.slice(-1)===",")i=tt(e,i.substring(0,i.length-1)),o.push(i);else{var c="";i=tt(e,i);for(var l=!1;;){var a=t.charAt(r);if(a===""){o.push((i+c).trim());break}else if(l)a===")"&&(l=!1);else if(a===","){r+=1,o.push((i+c).trim());break}else a==="("&&(l=!0);c+=a,r+=1}}}return o.join(", ")}function tt(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function Kn(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function vt(){var e=document.createElement("a");return e.href="",e.href}function rr(e,t,r,n){return r==="src"||r==="href"&&n&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n&&n[0]!=="#"||r==="background"&&n&&(t==="table"||t==="td"||t==="th")?tt(e,n):r==="srcset"&&n?Zn(e,n):r==="style"&&n?et(n,vt()):t==="object"&&r==="data"&&n?tt(e,n):n}function Jn(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?e.matches(r):!1}function rt(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?rt(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?rt(e.parentNode,t,r):!1}function nr(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(rt(n,t,!0))return!0;return!!(r&&(n.matches(r)||n.closest(r)))}function Qn(e,t,r){var n=e.contentWindow;if(n){var o=!1,i;try{i=n.document.readyState}catch{return}if(i!=="complete"){var c=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(c),o=!0,t()});return}var l="about:blank";if(n.location.href!==l||e.src===l||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}}function qn(e){return e.getAttribute("href")?e.sheet!==null:!0}function eo(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var i=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(i),n=!0,t()})}}function to(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,l=t.maskTextSelector,a=t.inlineStylesheet,s=t.maskInputOptions,u=s===void 0?{}:s,d=t.maskTextFn,p=t.maskInputFn,h=t.dataURLOptions,f=h===void 0?{}:h,m=t.inlineImages,y=t.recordCanvas,v=t.keepIframeSrcFn,w=t.newlyAddedElement,b=w===void 0?!1:w,T=ro(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:F.Document,childNodes:[],compatMode:e.compatMode,rootId:T}:{type:F.Document,childNodes:[],rootId:T};case e.DOCUMENT_TYPE_NODE:return{type:F.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:T};case e.ELEMENT_NODE:return oo(e,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:a,maskInputOptions:u,maskInputFn:p,dataURLOptions:f,inlineImages:m,recordCanvas:y,keepIframeSrcFn:v,newlyAddedElement:b,rootId:T});case e.TEXT_NODE:return no(e,{maskTextClass:c,maskTextSelector:l,maskTextFn:d,rootId:T});case e.CDATA_SECTION_NODE:return{type:F.CDATA,textContent:"",rootId:T};case e.COMMENT_NODE:return{type:F.Comment,textContent:e.textContent||"",rootId:T};default:return!1}}function ro(e,t){if(t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function no(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,c=t.rootId,l=e.parentNode&&e.parentNode.tagName,a=e.textContent,s=l==="STYLE"?!0:void 0,u=l==="SCRIPT"?!0:void 0;if(s&&a){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(a=Vn(e.parentNode.sheet))}catch(d){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(d),e)}a=et(a,vt())}return u&&(a="SCRIPT_PLACEHOLDER"),!s&&!u&&a&&nr(e,n,o)&&(a=i?i(a):a.replace(/[\S]/g,"*")),{type:F.Text,textContent:a||"",isStyle:s,rootId:c}}function oo(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,c=t.maskInputOptions,l=c===void 0?{}:c,a=t.maskInputFn,s=t.dataURLOptions,u=s===void 0?{}:s,d=t.inlineImages,p=t.recordCanvas,h=t.keepIframeSrcFn,f=t.newlyAddedElement,m=f===void 0?!1:f,y=t.rootId,v=Jn(e,n,o),w=Wn(e),b={},T=e.attributes.length,O=0;O<T;O++){var I=e.attributes[O];b[I.name]=rr(r,w,I.name,I.value)}if(w==="link"&&i){var k=Array.from(r.styleSheets).find(function(S){return S.href===e.href}),E=null;k&&(E=ft(k)),E&&(delete b.rel,delete b.href,b._cssText=et(E,k.href))}if(w==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var E=ft(e.sheet);E&&(b._cssText=et(E,vt()))}if(w==="input"||w==="textarea"||w==="select"){var Y=e.value;b.type!=="radio"&&b.type!=="checkbox"&&b.type!=="submit"&&b.type!=="button"&&Y?b.value=mt({type:b.type,tagName:w,value:Y,maskInputOptions:l,maskInputFn:a}):e.checked&&(b.checked=e.checked)}if(w==="option"&&(e.selected&&!l.select?b.selected=!0:delete b.selected),w==="canvas"&&p){if(e.__context==="2d")Fn(e)||(b.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){var U=e.toDataURL(u.type,u.quality),K=document.createElement("canvas");K.width=e.width,K.height=e.height;var $=K.toDataURL(u.type,u.quality);U!==$&&(b.rr_dataURL=U)}}if(w==="img"&&d){Me||(Me=r.createElement("canvas"),tr=Me.getContext("2d"));var R=e,W=R.crossOrigin;R.crossOrigin="anonymous";var V=function(){try{Me.width=R.naturalWidth,Me.height=R.naturalHeight,tr.drawImage(R,0,0),b.rr_dataURL=Me.toDataURL(u.type,u.quality)}catch(S){console.warn("Cannot inline img src=".concat(R.currentSrc,"! Error: ").concat(S))}W?b.crossOrigin=W:R.removeAttribute("crossorigin")};R.complete&&R.naturalWidth!==0?V():R.onload=V}if((w==="audio"||w==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),v){var L=e.getBoundingClientRect(),M=L.width,G=L.height;b={class:b.class,rr_width:"".concat(M,"px"),rr_height:"".concat(G,"px")}}return w==="iframe"&&!h(b.src)&&(e.contentDocument||(b.rr_src=b.src),delete b.src),{type:F.Element,tagName:w,attributes:b,childNodes:[],isSVG:Kn(e)||void 0,needBlock:v,rootId:y}}function X(e){return e===void 0?"":e.toLowerCase()}function io(e,t){return!!(t.comment&&e.type===F.Comment||e.type===F.Element&&(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js"))||t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(X(e.attributes.name).match(/^msapplication-tile(image|color)$/)||X(e.attributes.name)==="application-name"||X(e.attributes.rel)==="icon"||X(e.attributes.rel)==="apple-touch-icon"||X(e.attributes.rel)==="shortcut icon"))||e.tagName==="meta"&&(t.headMetaDescKeywords&&X(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(X(e.attributes.property).match(/^(og|twitter|fb):/)||X(e.attributes.name).match(/^(og|twitter):/)||X(e.attributes.name)==="pinterest")||t.headMetaRobots&&(X(e.attributes.name)==="robots"||X(e.attributes.name)==="googlebot"||X(e.attributes.name)==="bingbot")||t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0||t.headMetaAuthorship&&(X(e.attributes.name)==="author"||X(e.attributes.name)==="generator"||X(e.attributes.name)==="framework"||X(e.attributes.name)==="publisher"||X(e.attributes.name)==="progid"||X(e.attributes.property).match(/^article:/)||X(e.attributes.property).match(/^product:/))||t.headMetaVerification&&(X(e.attributes.name)==="google-site-verification"||X(e.attributes.name)==="yandex-verification"||X(e.attributes.name)==="csrf-token"||X(e.attributes.name)==="p:domain_verify"||X(e.attributes.name)==="verify-v1"||X(e.attributes.name)==="verification"||X(e.attributes.name)==="shopify-checkout-api-token"))))}function xe(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,l=t.maskTextSelector,a=t.skipChild,s=a===void 0?!1:a,u=t.inlineStylesheet,d=u===void 0?!0:u,p=t.maskInputOptions,h=p===void 0?{}:p,f=t.maskTextFn,m=t.maskInputFn,y=t.slimDOMOptions,v=t.dataURLOptions,w=v===void 0?{}:v,b=t.inlineImages,T=b===void 0?!1:b,O=t.recordCanvas,I=O===void 0?!1:O,k=t.onSerialize,E=t.onIframeLoad,Y=t.iframeLoadTimeout,U=Y===void 0?5e3:Y,K=t.onStylesheetLoad,$=t.stylesheetLoadTimeout,R=$===void 0?5e3:$,W=t.keepIframeSrcFn,V=W===void 0?function(){return!1}:W,L=t.newlyAddedElement,M=L===void 0?!1:L,G=t.preserveWhiteSpace,S=G===void 0?!0:G,g=to(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,dataURLOptions:w,inlineImages:T,recordCanvas:I,keepIframeSrcFn:V,newlyAddedElement:M});if(!g)return console.warn(e,"not serialized"),null;var N;if(n.hasNode(e)?N=n.getId(e):io(g,y)||!S&&g.type===F.Text&&!g.isStyle&&!g.textContent.replace(/^\s+|\s+$/gm,"").length?N=Ue:N=$n(),N===Ue)return null;var C=Object.assign(g,{id:N});n.add(e,C),k&&k(e);var A=!s;if(C.type===F.Element){A=A&&!C.needBlock,delete C.needBlock;var P=e.shadowRoot;P&&je(P)&&(C.isShadowHost=!0)}if((C.type===F.Document||C.type===F.Element)&&A){y.headWhitespace&&C.type===F.Element&&C.tagName==="head"&&(S=!1);for(var H={doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,skipChild:s,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:y,dataURLOptions:w,inlineImages:T,recordCanvas:I,preserveWhiteSpace:S,onSerialize:k,onIframeLoad:E,iframeLoadTimeout:U,onStylesheetLoad:K,stylesheetLoadTimeout:R,keepIframeSrcFn:V},j=0,z=Array.from(e.childNodes);j<z.length;j++){var ie=z[j],Ne=xe(ie,H);Ne&&C.childNodes.push(Ne)}if(Qt(e)&&e.shadowRoot)for(var $e=0,qe=Array.from(e.shadowRoot.childNodes);$e<qe.length;$e++){var ie=qe[$e],Ne=xe(ie,H);Ne&&(je(e.shadowRoot)&&(Ne.isShadow=!0),C.childNodes.push(Ne))}}return e.parentNode&&We(e.parentNode)&&je(e.parentNode)&&(C.isShadow=!0),C.type===F.Element&&C.tagName==="iframe"&&Qn(e,function(){var ge=e.contentDocument;if(ge&&E){var Ln=xe(ge,{doc:ge,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:y,dataURLOptions:w,inlineImages:T,recordCanvas:I,preserveWhiteSpace:S,onSerialize:k,onIframeLoad:E,iframeLoadTimeout:U,onStylesheetLoad:K,stylesheetLoadTimeout:R,keepIframeSrcFn:V});Ln&&E(e,Ln)}},U),C.type===F.Element&&C.tagName==="link"&&C.attributes.rel==="stylesheet"&&(eo(e,function(){if(K){var ge=xe(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:y,dataURLOptions:w,inlineImages:T,recordCanvas:I,preserveWhiteSpace:S,onSerialize:k,onIframeLoad:E,iframeLoadTimeout:U,onStylesheetLoad:K,stylesheetLoadTimeout:R,keepIframeSrcFn:V});ge&&K(e,ge)}},R),qn(e)===!1)?null:C}function so(e,t){var r=t||{},n=r.mirror,o=n===void 0?new pt:n,i=r.blockClass,c=i===void 0?"rr-block":i,l=r.blockSelector,a=l===void 0?null:l,s=r.maskTextClass,u=s===void 0?"rr-mask":s,d=r.maskTextSelector,p=d===void 0?null:d,h=r.inlineStylesheet,f=h===void 0?!0:h,m=r.inlineImages,y=m===void 0?!1:m,v=r.recordCanvas,w=v===void 0?!1:v,b=r.maskAllInputs,T=b===void 0?!1:b,O=r.maskTextFn,I=r.maskInputFn,k=r.slimDOM,E=k===void 0?!1:k,Y=r.dataURLOptions,U=r.preserveWhiteSpace,K=r.onSerialize,$=r.onIframeLoad,R=r.iframeLoadTimeout,W=r.onStylesheetLoad,V=r.stylesheetLoadTimeout,L=r.keepIframeSrcFn,M=L===void 0?function(){return!1}:L,G=T===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:T===!1?{password:!0}:T,S=E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:E==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:E===!1?{}:E;return xe(e,{doc:e,mirror:o,blockClass:c,blockSelector:a,maskTextClass:u,maskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:G,maskTextFn:O,maskInputFn:I,slimDOMOptions:S,dataURLOptions:Y,inlineImages:y,recordCanvas:w,preserveWhiteSpace:U,onSerialize:K,onIframeLoad:$,iframeLoadTimeout:R,onStylesheetLoad:W,stylesheetLoadTimeout:V,keepIframeSrcFn:M,newlyAddedElement:!1})}var or=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function ao(e,t){t===void 0&&(t={});var r=1,n=1;function o(S){var g=S.match(/\n/g);g&&(r+=g.length);var N=S.lastIndexOf(`
`);n=N===-1?n+S.length:S.length-N}function i(){var S={line:r,column:n};return function(g){return g.position=new c(S),f(),g}}var c=function(){function S(g){this.start=g,this.end={line:r,column:n},this.source=t.source}return S}();c.prototype.content=e;var l=[];function a(S){var g=new Error("".concat(t.source||"",":").concat(r,":").concat(n,": ").concat(S));if(g.reason=S,g.filename=t.source,g.line=r,g.column=n,g.source=e,t.silent)l.push(g);else throw g}function s(){var S=p();return{type:"stylesheet",stylesheet:{source:t.source,rules:S,parsingErrors:l}}}function u(){return h(/^{\s*/)}function d(){return h(/^}/)}function p(){var S,g=[];for(f(),m(g);e.length&&e.charAt(0)!=="}"&&(S=M()||G());)S!==!1&&(g.push(S),m(g));return g}function h(S){var g=S.exec(e);if(g){var N=g[0];return o(N),e=e.slice(N.length),g}}function f(){h(/^\s*/)}function m(S){S===void 0&&(S=[]);for(var g;g=y();)g!==!1&&S.push(g),g=y();return S}function y(){var S=i();if(!(e.charAt(0)!=="/"||e.charAt(1)!=="*")){for(var g=2;e.charAt(g)!==""&&(e.charAt(g)!=="*"||e.charAt(g+1)!=="/");)++g;if(g+=2,e.charAt(g-1)==="")return a("End of comment missing");var N=e.slice(2,g-2);return n+=2,o(N),e=e.slice(g),n+=2,S({type:"comment",comment:N})}}function v(){var S=h(/^([^{]+)/);if(S)return me(S[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(g){return g.replace(/,/g,"\u200C")}).split(/\s*(?![^(]*\)),\s*/).map(function(g){return g.replace(/\u200C/g,",")})}function w(){var S=i(),g=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(g){var N=me(g[0]);if(!h(/^:\s*/))return a("property missing ':'");var C=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),A=S({type:"declaration",property:N.replace(or,""),value:C?me(C[0]).replace(or,""):""});return h(/^[;\s]*/),A}}function b(){var S=[];if(!u())return a("missing '{'");m(S);for(var g;g=w();)g!==!1&&(S.push(g),m(S)),g=w();return d()?S:a("missing '}'")}function T(){for(var S,g=[],N=i();S=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)g.push(S[1]),h(/^,\s*/);if(g.length)return N({type:"keyframe",values:g,declarations:b()})}function O(){var S=i(),g=h(/^@([-\w]+)?keyframes\s*/);if(g){var N=g[1];if(g=h(/^([-\w]+)\s*/),!g)return a("@keyframes missing name");var C=g[1];if(!u())return a("@keyframes missing '{'");for(var A,P=m();A=T();)P.push(A),P=P.concat(m());return d()?S({type:"keyframes",name:C,vendor:N,keyframes:P}):a("@keyframes missing '}'")}}function I(){var S=i(),g=h(/^@supports *([^{]+)/);if(g){var N=me(g[1]);if(!u())return a("@supports missing '{'");var C=m().concat(p());return d()?S({type:"supports",supports:N,rules:C}):a("@supports missing '}'")}}function k(){var S=i(),g=h(/^@host\s*/);if(g){if(!u())return a("@host missing '{'");var N=m().concat(p());return d()?S({type:"host",rules:N}):a("@host missing '}'")}}function E(){var S=i(),g=h(/^@media *([^{]+)/);if(g){var N=me(g[1]);if(!u())return a("@media missing '{'");var C=m().concat(p());return d()?S({type:"media",media:N,rules:C}):a("@media missing '}'")}}function Y(){var S=i(),g=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(g)return S({type:"custom-media",name:me(g[1]),media:me(g[2])})}function U(){var S=i(),g=h(/^@page */);if(g){var N=v()||[];if(!u())return a("@page missing '{'");for(var C=m(),A;A=w();)C.push(A),C=C.concat(m());return d()?S({type:"page",selectors:N,declarations:C}):a("@page missing '}'")}}function K(){var S=i(),g=h(/^@([-\w]+)?document *([^{]+)/);if(g){var N=me(g[1]),C=me(g[2]);if(!u())return a("@document missing '{'");var A=m().concat(p());return d()?S({type:"document",document:C,vendor:N,rules:A}):a("@document missing '}'")}}function $(){var S=i(),g=h(/^@font-face\s*/);if(g){if(!u())return a("@font-face missing '{'");for(var N=m(),C;C=w();)N.push(C),N=N.concat(m());return d()?S({type:"font-face",declarations:N}):a("@font-face missing '}'")}}var R=L("import"),W=L("charset"),V=L("namespace");function L(S){var g=new RegExp("^@"+S+"\\s*([^;]+);");return function(){var N=i(),C=h(g);if(C){var A={type:S};return A[S]=C[1].trim(),N(A)}}}function M(){if(e[0]==="@")return O()||E()||Y()||I()||R()||W()||V()||K()||U()||k()||$()}function G(){var S=i(),g=v();return g?(m(),S({type:"rule",selectors:g,declarations:b()})):a("selector missing")}return gt(s())}function me(e){return e?e.replace(/^\s+|\s+$/g,""):""}function gt(e,t){for(var r=e&&typeof e.type=="string",n=r?e:t,o=0,i=Object.keys(e);o<i.length;o++){var c=i[o],l=e[c];Array.isArray(l)?l.forEach(function(a){gt(a,n)}):l&&typeof l=="object"&&gt(l,n)}return r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var ir={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function lo(e){var t=ir[e.tagName]?ir[e.tagName]:e.tagName;return t==="link"&&e.attributes._cssText&&(t="style"),t}function co(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var sr=/([^\\]):hover/,uo=new RegExp(sr.source,"g");function ar(e,t){var r=t?.stylesWithHoverClass.get(e);if(r)return r;var n=ao(e,{silent:!0});if(!n.stylesheet)return e;var o=[];if(n.stylesheet.rules.forEach(function(l){"selectors"in l&&(l.selectors||[]).forEach(function(a){sr.test(a)&&o.push(a)})}),o.length===0)return e;var i=new RegExp(o.filter(function(l,a){return o.indexOf(l)===a}).sort(function(l,a){return a.length-l.length}).map(function(l){return co(l)}).join("|"),"g"),c=e.replace(i,function(l){var a=l.replace(uo,"$1.\\:hover");return"".concat(l,", ").concat(a)});return t?.stylesWithHoverClass.set(e,c),c}function lr(){var e=new Map;return{stylesWithHoverClass:e}}function ho(e,t){var r=t.doc,n=t.hackCss,o=t.cache;switch(e.type){case F.Document:return r.implementation.createDocument(null,"",null);case F.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case F.Element:{var i=lo(e),c;e.isSVG?c=r.createElementNS("http://www.w3.org/2000/svg",i):c=r.createElement(i);var l=function(s){if(!Object.prototype.hasOwnProperty.call(e.attributes,s))return"continue";var u=e.attributes[s];if(i==="option"&&s==="selected"&&u===!1)return"continue";if(u=typeof u=="boolean"||typeof u=="number"?"":u,s.startsWith("rr_")){if(i==="canvas"&&s==="rr_dataURL"){var d=document.createElement("img");d.onload=function(){var b=c.getContext("2d");b&&b.drawImage(d,0,0,d.width,d.height)},d.src=u,c.RRNodeType&&(c.rr_dataURL=u)}else if(i==="img"&&s==="rr_dataURL"){var p=c;p.currentSrc.startsWith("data:")||(p.setAttribute("rrweb-original-src",e.attributes.src),p.src=u)}if(s==="rr_width")c.style.width=u;else if(s==="rr_height")c.style.height=u;else if(s==="rr_mediaCurrentTime")c.currentTime=e.attributes.rr_mediaCurrentTime;else if(s==="rr_mediaState")switch(u){case"played":c.play().catch(function(b){return console.warn("media playback error",b)});break;case"paused":c.pause();break}}else{var h=i==="textarea"&&s==="value",f=i==="style"&&s==="_cssText";if(f&&n&&(u=ar(u,o)),h||f){for(var m=r.createTextNode(u),y=0,v=Array.from(c.childNodes);y<v.length;y++){var w=v[y];w.nodeType===c.TEXT_NODE&&c.removeChild(w)}return c.appendChild(m),"continue"}try{if(e.isSVG&&s==="xlink:href")c.setAttributeNS("http://www.w3.org/1999/xlink",s,u);else if(s==="onload"||s==="onclick"||s.substring(0,7)==="onmouse")c.setAttribute("_"+s,u);else{if(i==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&s==="content")return c.setAttribute("csp-content",u),"continue";i==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||i==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(i==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?c.setAttribute("rrweb-original-srcset",e.attributes.srcset):c.setAttribute(s,u))}}catch{}}};for(var a in e.attributes)l(a);if(e.isShadowHost)if(!c.shadowRoot)c.attachShadow({mode:"open"});else for(;c.shadowRoot.firstChild;)c.shadowRoot.removeChild(c.shadowRoot.firstChild);return c}case F.Text:return r.createTextNode(e.isStyle&&n?ar(e.textContent,o):e.textContent);case F.CDATA:return r.createCDATASection(e.textContent);case F.Comment:return r.createComment(e.textContent);default:return null}}function nt(e,t){var r=t.doc,n=t.mirror,o=t.skipChild,i=o===void 0?!1:o,c=t.hackCss,l=c===void 0?!0:c,a=t.afterAppend,s=t.cache,u=ho(e,{doc:r,hackCss:l,cache:s});if(!u)return null;if(e.rootId&&console.assert(n.getNode(e.rootId)===r,"Target document should have the same root id."),e.type===F.Document&&(r.close(),r.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==F.DocumentType&&(e.childNodes[0].type===F.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),u=r),n.add(u,e),(e.type===F.Document||e.type===F.Element)&&!i)for(var d=0,p=e.childNodes;d<p.length;d++){var h=p[d],f=nt(h,{doc:r,mirror:n,skipChild:!1,hackCss:l,afterAppend:a,cache:s});if(!f){console.warn("Failed to rebuild",h);continue}h.isShadow&&Qt(u)&&u.shadowRoot?u.shadowRoot.appendChild(f):u.appendChild(f),a&&a(f)}return u}function po(e,t){function r(c){t(c)}for(var n=0,o=e.getIds();n<o.length;n++){var i=o[n];e.has(i)&&r(e.getNode(i))}}function mo(e,t){var r=t.getMeta(e);if(r?.type===F.Element){var n=e;for(var o in r.attributes)if(Object.prototype.hasOwnProperty.call(r.attributes,o)&&o.startsWith("rr_")){var i=r.attributes[o];o==="rr_scrollLeft"&&(n.scrollLeft=i),o==="rr_scrollTop"&&(n.scrollTop=i)}}}function fo(e,t){var r=t.doc,n=t.onVisit,o=t.hackCss,i=o===void 0?!0:o,c=t.afterAppend,l=t.cache,a=t.mirror,s=a===void 0?new pt:a,u=nt(e,{doc:r,mirror:s,skipChild:!1,hackCss:i,afterAppend:c,cache:l});return po(s,function(d){n&&n(d),mo(d,s)}),u}function oe(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const Ie=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;Q.mirror={map:{},getId(){return console.error(Ie),-1},getNode(){return console.error(Ie),null},removeNodeFromMap(){console.error(Ie)},has(){return console.error(Ie),!1},reset(){console.error(Ie)}},typeof window<"u"&&window.Proxy&&window.Reflect&&(Q.mirror=new Proxy(Q.mirror,{get(e,t,r){return t==="map"&&console.error(Ie),Reflect.get(e,t,r)}}));function ke(e,t,r={}){let n=null,o=0;return function(...i){const c=Date.now();!o&&r.leading===!1&&(o=c);const l=t-(c-o),a=this;l<=0||l>t?(n&&(clearTimeout(n),n=null),o=c,e.apply(a,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(a,i)},l))}}function Ve(e,t,r,n,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(c){setTimeout(()=>{r.set.call(this,c)},0),i&&i.set&&i.set.call(this,c)}}),()=>Ve(e,t,i||{},!0)}function ye(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function yt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function bt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function se(e,t,r){if(!e)return!1;const n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!n)return!1;if(typeof t=="string"){if(n.classList.contains(t)||r&&n.closest("."+t)!==null)return!0}else if(rt(n,t,r))return!0;return!1}function cr(e,t){return t.getId(e)!==-1}function ot(e,t){return t.getId(e)===Ue}function wt(e,t){if(We(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?wt(e.parentNode,t):!0:!0}function St(e){return Boolean(e.changedTouches)}function Nt(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function ur(e){const t={},r=(o,i)=>{const c={value:o,parent:i,children:[]};return t[o.node.id]=c,c},n=[];for(const o of e){const{nextId:i,parentId:c}=o;if(i&&i in t){const l=t[i];if(l.parent){const a=l.parent.children.indexOf(l);l.parent.children.splice(a,0,r(o,l.parent))}else{const a=n.indexOf(l);n.splice(a,0,r(o,null))}continue}if(c in t){const l=t[c];l.children.push(r(o,l));continue}n.push(r(o,null))}return n}function Et(e,t){t(e.value);for(let r=e.children.length-1;r>=0;r--)Et(e.children[r],t)}function Oe(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ct(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Tt(e,t){var r,n;const o=(n=(r=e.ownerDocument)==null?void 0:r.defaultView)==null?void 0:n.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),c=Tt(o,t),l=i.height/o.clientHeight;return{x:i.x*c.relativeScale+c.x,y:i.y*c.relativeScale+c.y,relativeScale:l,absoluteScale:c.absoluteScale*l}}function Ge(e){return Boolean(e?.shadowRoot)}function De(e,t){const r=e[t[0]];return t.length===1?r:De(r.cssRules[t[1]].cssRules,t.slice(2))}function Mt(e){const t=[...e],r=t.pop();return{positions:t,index:r}}function dr(e){const t=new Set,r=[];for(let n=e.length;n--;){const o=e[n];t.has(o.id)||(r.push(o),t.add(o.id))}return r}var vo=Object.freeze({__proto__:null,on:oe,get _mirror(){return Q.mirror},throttle:ke,hookSetter:Ve,patch:ye,getWindowHeight:yt,getWindowWidth:bt,isBlocked:se,isSerialized:cr,isIgnored:ot,isAncestorRemoved:wt,isTouchEvent:St,polyfill:Nt,queueToResolveTrees:ur,iterateResolveTree:Et,isSerializedIframe:Oe,isSerializedStylesheet:Ct,getBaseDimension:Tt,hasShadowRoot:Ge,getNestedRule:De,getPositionsAndIndex:Mt,uniqueTextMutations:dr}),x=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(x||{}),D=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e))(D||{}),ee=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ee||{}),fe=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(fe||{}),Ee=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e))(Ee||{}),B=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e))(B||{});function hr(e){return"__ln"in e}class go{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=r?.next||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&hr(t.previousSibling)){const n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&hr(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(t){const r=t.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const pr=(e,t)=>`${e}@${t}`;class yo{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new go,n=l=>{let a=l,s=Ue;for(;s===Ue;)a=a&&a.nextSibling,s=a&&this.mirror.getId(a);return s},o=l=>{var a,s,u,d,p;const h=l.getRootNode?(a=l.getRootNode())==null?void 0:a.host:null;let f=h;for(;(u=(s=f?.getRootNode)==null?void 0:s.call(f))!=null&&u.host;)f=((p=(d=f?.getRootNode)==null?void 0:d.call(f))==null?void 0:p.host)||null;const m=!this.doc.contains(l)&&(!f||!this.doc.contains(f));if(!l.parentNode||m)return;const y=We(l.parentNode)?this.mirror.getId(h):this.mirror.getId(l.parentNode),v=n(l);if(y===-1||v===-1)return r.addNode(l);const w=xe(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:b=>{Oe(b,this.mirror)&&this.iframeManager.addIframe(b),Ct(b,this.mirror)&&this.stylesheetManager.addStylesheet(b),Ge(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,document)},onIframeLoad:(b,T)=>{this.iframeManager.attachIframe(b,T,this.mirror),this.shadowDomManager.observeAttachShadow(b)},onStylesheetLoad:(b,T)=>{this.stylesheetManager.attachStylesheet(b,T,this.mirror)}});w&&t.push({parentId:y,nextId:v,node:w})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of Array.from(this.movedSet.values()))mr(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||o(l);for(const l of Array.from(this.addedSet.values()))!vr(this.droppedSet,l)&&!mr(this.removes,l,this.mirror)||vr(this.movedSet,l)?o(l):this.droppedSet.add(l);let i=null;for(;r.length;){let l=null;if(i){const a=this.mirror.getId(i.value.parentNode),s=n(i.value);a!==-1&&s!==-1&&(l=i)}if(!l)for(let a=r.length-1;a>=0;a--){const s=r.get(a);if(s){const u=this.mirror.getId(s.value.parentNode),d=n(s.value);if(u!==-1&&d!==-1){l=s;break}}}if(!l){for(;r.head;)r.removeNode(r.head.value);break}i=l.previous,r.removeNode(l.value),o(l.value)}const c={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>({id:this.mirror.getId(l.node),attributes:l.attributes})).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:t};!c.texts.length&&!c.attributes.length&&!c.removes.length&&!c.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=t=>{if(!ot(t.target,this.mirror))switch(t.type){case"characterData":{const r=t.target.textContent;!se(t.target,this.blockClass,!1)&&r!==t.oldValue&&this.texts.push({value:nr(t.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let n=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(n=mt({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),se(t.target,this.blockClass,!1)||n===t.oldValue)return;let o=this.attributes.find(i=>i.node===t.target);if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){const i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const c=o.attributes.style;for(const l of Array.from(r.style)){const a=r.style.getPropertyValue(l),s=r.style.getPropertyPriority(l);(a!==i.style.getPropertyValue(l)||s!==i.style.getPropertyPriority(l))&&(s===""?c[l]=a:c[l]=[a,s])}for(const l of Array.from(i.style))r.style.getPropertyValue(l)===""&&(c[l]=!1)}else o.attributes[t.attributeName]=rr(this.doc,t.target.tagName,t.attributeName,n);break}case"childList":{if(se(t.target,this.blockClass,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const n=this.mirror.getId(r),o=We(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);se(t.target,this.blockClass,!1)||ot(r,this.mirror)||!cr(r,this.mirror)||(this.addedSet.has(r)?(xt(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&n===-1||wt(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[pr(n,o)]?xt(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:We(t.target)&&je(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(this.mirror.hasNode(t)){if(ot(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[pr(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);se(t,this.blockClass,!1)||t.childNodes.forEach(n=>this.genAdds(n))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function xt(e,t){e.delete(t),t.childNodes.forEach(r=>xt(e,r))}function mr(e,t,r){return e.length===0?!1:fr(e,t,r)}function fr(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return e.some(i=>i.id===o)?!0:fr(e,n,r)}function vr(e,t){return e.size===0?!1:gr(e,t)}function gr(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:gr(e,r):!1}var bo=Object.defineProperty,wo=Object.defineProperties,So=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,br=(e,t,r)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wr=(e,t)=>{for(var r in t||(t={}))No.call(t,r)&&br(e,r,t[r]);if(yr)for(var r of yr(t))Eo.call(t,r)&&br(e,r,t[r]);return e},Co=(e,t)=>wo(e,So(t));const Ce=[],Sr=typeof CSSGroupingRule<"u",Nr=typeof CSSMediaRule<"u",Er=typeof CSSSupportsRule<"u",Cr=typeof CSSConditionRule<"u";function Be(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function Tr(e,t){var r,n;const o=new yo;Ce.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const c=(n=(r=window?.Zone)==null?void 0:r.__symbol__)==null?void 0:n.call(r,"MutationObserver");c&&window[c]&&(i=window[c]);const l=new i(o.processMutations.bind(o));return l.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function To({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let c=[],l;const a=ke(d=>{const p=Date.now()-l;e(c.map(h=>(h.timeOffset-=p,h)),d),c=[],l=null},i),s=ke(d=>{const p=Be(d),{clientX:h,clientY:f}=St(d)?d.changedTouches[0]:d;l||(l=Date.now()),c.push({x:h,y:f,id:n.getId(p),timeOffset:Date.now()-l}),a(typeof DragEvent<"u"&&d instanceof DragEvent?D.Drag:d instanceof MouseEvent?D.MouseMove:D.TouchMove)},o,{trailing:!1}),u=[oe("mousemove",s,r),oe("touchmove",s,r),oe("drag",s,r)];return()=>{u.forEach(d=>d())}}function Mo({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const i=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[],l=a=>s=>{const u=Be(s);if(se(u,n,!0))return;const d=St(s)?s.changedTouches[0]:s;if(!d)return;const p=r.getId(u),{clientX:h,clientY:f}=d;e({type:ee[a],id:p,x:h,y:f})};return Object.keys(ee).filter(a=>Number.isNaN(Number(a))&&!a.endsWith("_Departed")&&i[a]!==!1).forEach(a=>{const s=a.toLowerCase(),u=l(a);c.push(oe(s,u,t))}),()=>{c.forEach(a=>a())}}function Mr({scrollCb:e,doc:t,mirror:r,blockClass:n,sampling:o}){const i=ke(c=>{const l=Be(c);if(!l||se(l,n,!0))return;const a=r.getId(l);if(l===t){const s=t.scrollingElement||t.documentElement;e({id:a,x:s.scrollLeft,y:s.scrollTop})}else e({id:a,x:l.scrollLeft,y:l.scrollTop})},o.scroll||100);return oe("scroll",i,t)}function xo({viewportResizeCb:e}){let t=-1,r=-1;const n=ke(()=>{const o=yt(),i=bt();(t!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),t=o,r=i)},200);return oe("resize",n,window)}function xr(e,t){const r=wr({},e);return t||delete r.userTriggered,r}const Io=["INPUT","TEXTAREA","SELECT"],Ir=new WeakMap;function ko({inputCb:e,doc:t,mirror:r,blockClass:n,ignoreClass:o,maskInputOptions:i,maskInputFn:c,sampling:l,userTriggeredOnInput:a}){function s(f){let m=Be(f);const y=f.isTrusted;if(m&&m.tagName==="OPTION"&&(m=m.parentElement),!m||!m.tagName||Io.indexOf(m.tagName)<0||se(m,n,!0))return;const v=m.type;if(m.classList.contains(o))return;let w=m.value,b=!1;v==="radio"||v==="checkbox"?b=m.checked:(i[m.tagName.toLowerCase()]||i[v])&&(w=mt({maskInputOptions:i,tagName:m.tagName,type:v,value:w,maskInputFn:c})),u(m,xr({text:w,isChecked:b,userTriggered:y},a));const T=m.name;v==="radio"&&T&&b&&t.querySelectorAll(`input[type="radio"][name="${T}"]`).forEach(O=>{O!==m&&u(O,xr({text:O.value,isChecked:!b,userTriggered:!1},a))})}function u(f,m){const y=Ir.get(f);if(!y||y.text!==m.text||y.isChecked!==m.isChecked){Ir.set(f,m);const v=r.getId(f);e(Co(wr({},m),{id:v}))}}const d=(l.input==="last"?["change"]:["input","change"]).map(f=>oe(f,s,t)),p=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),h=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return p&&p.set&&d.push(...h.map(f=>Ve(f[0],f[1],{set(){s({target:this})}}))),()=>{d.forEach(f=>f())}}function it(e){const t=[];function r(n,o){if(Sr&&n.parentRule instanceof CSSGroupingRule||Nr&&n.parentRule instanceof CSSMediaRule||Er&&n.parentRule instanceof CSSSupportsRule||Cr&&n.parentRule instanceof CSSConditionRule){const i=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(i)}else{const i=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(i)}return o}return r(e,t)}function Oo({styleSheetRuleCb:e,mirror:t},{win:r}){const n=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(l,a){const s=t.getId(this.ownerNode);return s!==-1&&e({id:s,adds:[{rule:l,index:a}]}),n.apply(this,[l,a])};const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=function(l){const a=t.getId(this.ownerNode);return a!==-1&&e({id:a,removes:[{index:l}]}),o.apply(this,[l])};const i={};Sr?i.CSSGroupingRule=r.CSSGroupingRule:(Nr&&(i.CSSMediaRule=r.CSSMediaRule),Cr&&(i.CSSConditionRule=r.CSSConditionRule),Er&&(i.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(i).forEach(([l,a])=>{c[l]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=function(s,u){const d=t.getId(this.parentStyleSheet.ownerNode);return d!==-1&&e({id:d,adds:[{rule:s,index:[...it(this),u||0]}]}),c[l].insertRule.apply(this,[s,u])},a.prototype.deleteRule=function(s){const u=t.getId(this.parentStyleSheet.ownerNode);return u!==-1&&e({id:u,removes:[{index:[...it(this),s]}]}),c[l].deleteRule.apply(this,[s])}}),()=>{r.CSSStyleSheet.prototype.insertRule=n,r.CSSStyleSheet.prototype.deleteRule=o,Object.entries(i).forEach(([l,a])=>{a.prototype.insertRule=c[l].insertRule,a.prototype.deleteRule=c[l].deleteRule})}}function Do({styleDeclarationCb:e,mirror:t},{win:r}){const n=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=function(i,c,l){var a,s;const u=t.getId((s=(a=this.parentRule)==null?void 0:a.parentStyleSheet)==null?void 0:s.ownerNode);return u!==-1&&e({id:u,set:{property:i,value:c,priority:l},index:it(this.parentRule)}),n.apply(this,[i,c,l])};const o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=function(i){var c,l;const a=t.getId((l=(c=this.parentRule)==null?void 0:c.parentStyleSheet)==null?void 0:l.ownerNode);return a!==-1&&e({id:a,remove:{property:i},index:it(this.parentRule)}),o.apply(this,[i])},()=>{r.CSSStyleDeclaration.prototype.setProperty=n,r.CSSStyleDeclaration.prototype.removeProperty=o}}function Ro({mediaInteractionCb:e,blockClass:t,mirror:r,sampling:n}){const o=c=>ke(l=>{const a=Be(l);if(!a||se(a,t,!0))return;const{currentTime:s,volume:u,muted:d}=a;e({type:c,id:r.getId(a),currentTime:s,volume:u,muted:d})},n.media||500),i=[oe("play",o(Ee.Play)),oe("pause",o(Ee.Pause)),oe("seeked",o(Ee.Seeked)),oe("volumechange",o(Ee.VolumeChange))];return()=>{i.forEach(c=>c())}}function Lo({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(l,a,s){const u=new i(l,a,s);return o.set(u,{family:l,buffer:typeof a!="string",descriptors:s,fontSource:typeof a=="string"?a:JSON.stringify(Array.from(new Uint8Array(a)))}),u};const c=ye(t.fonts,"add",function(l){return function(a){return setTimeout(()=>{const s=o.get(a);s&&(e(s),o.delete(a))},0),l.apply(this,[a])}});return n.push(()=>{r.FontFace=i}),n.push(c),()=>{n.forEach(l=>l())}}function Ao(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:c,inputCb:l,mediaInteractionCb:a,styleSheetRuleCb:s,styleDeclarationCb:u,canvasMutationCb:d,fontCb:p}=e;e.mutationCb=(...h)=>{t.mutation&&t.mutation(...h),r(...h)},e.mousemoveCb=(...h)=>{t.mousemove&&t.mousemove(...h),n(...h)},e.mouseInteractionCb=(...h)=>{t.mouseInteraction&&t.mouseInteraction(...h),o(...h)},e.scrollCb=(...h)=>{t.scroll&&t.scroll(...h),i(...h)},e.viewportResizeCb=(...h)=>{t.viewportResize&&t.viewportResize(...h),c(...h)},e.inputCb=(...h)=>{t.input&&t.input(...h),l(...h)},e.mediaInteractionCb=(...h)=>{t.mediaInteaction&&t.mediaInteaction(...h),a(...h)},e.styleSheetRuleCb=(...h)=>{t.styleSheetRule&&t.styleSheetRule(...h),s(...h)},e.styleDeclarationCb=(...h)=>{t.styleDeclaration&&t.styleDeclaration(...h),u(...h)},e.canvasMutationCb=(...h)=>{t.canvasMutation&&t.canvasMutation(...h),d(...h)},e.fontCb=(...h)=>{t.font&&t.font(...h),p(...h)}}function Fo(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};Ao(e,t);const n=Tr(e,e.doc),o=To(e),i=Mo(e),c=Mr(e),l=xo(e),a=ko(e),s=Ro(e),u=Oo(e,{win:r}),d=Do(e,{win:r}),p=e.collectFonts?Lo(e):()=>{},h=[];for(const f of e.plugins)h.push(f.observer(f.callback,r,f.options));return()=>{Ce.forEach(f=>f.reset()),n.disconnect(),o(),i(),c(),l(),a(),s(),u(),d(),p(),h.forEach(f=>f())}}class _o{constructor(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}addIframe(t){this.iframes.set(t,!0)}addLoadListener(t){this.loadListener=t}attachIframe(t,r,n){var o;this.mutationCb({adds:[{parentId:n.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(o=this.loadListener)==null||o.call(this,t)}}var Po=Object.defineProperty,$o=Object.defineProperties,Wo=Object.getOwnPropertyDescriptors,kr=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Or=(e,t,r)=>t in e?Po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dr=(e,t)=>{for(var r in t||(t={}))jo.call(t,r)&&Or(e,r,t[r]);if(kr)for(var r of kr(t))Uo.call(t,r)&&Or(e,r,t[r]);return e},Rr=(e,t)=>$o(e,Wo(t));class Vo{constructor(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const r=this;this.restorePatches.push(ye(HTMLElement.prototype,"attachShadow",function(n){return function(o){const i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,r){!je(t)||(Tr(Rr(Dr({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Mr(Rr(Dr({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})))}observeAttachShadow(t){if(t.contentWindow){const r=this;this.restorePatches.push(ye(t.contentWindow.HTMLElement.prototype,"attachShadow",function(n){return function(o){const i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t())}}for(var Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ze=typeof Uint8Array>"u"?[]:new Uint8Array(256),st=0;st<Re.length;st++)ze[Re.charCodeAt(st)]=st;var Go=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=Re[t[r]>>2],o+=Re[(t[r]&3)<<4|t[r+1]>>4],o+=Re[(t[r+1]&15)<<2|t[r+2]>>6],o+=Re[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o},Bo=function(e){var t=e.length*.75,r=e.length,n,o=0,i,c,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var s=new ArrayBuffer(t),u=new Uint8Array(s);for(n=0;n<r;n+=4)i=ze[e.charCodeAt(n)],c=ze[e.charCodeAt(n+1)],l=ze[e.charCodeAt(n+2)],a=ze[e.charCodeAt(n+3)],u[o++]=i<<2|c>>4,u[o++]=(c&15)<<4|l>>2,u[o++]=(l&3)<<6|a&63;return s};const Lr=new Map;function zo(e,t){let r=Lr.get(e);return r||(r=new Map,Lr.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const Ar=(e,t,r)=>{if(!e||!(_r(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=zo(r,n);let i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function at(e,t,r){if(e instanceof Array)return e.map(n=>at(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=Go(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[at(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[at(e.data,t,r),e.width,e.height]};if(_r(e,t)||typeof e=="object"){const n=e.constructor.name,o=Ar(e,t,r);return{rr_type:n,index:o}}}}return e}const Fr=(e,t,r)=>[...e].map(n=>at(n,t,r)),_r=(e,t)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(n=>typeof t[n]=="function");return Boolean(r.find(n=>e instanceof t[n]))};function Yo(e,t,r,n){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const c of i)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;const l=ye(t.CanvasRenderingContext2D.prototype,c,function(a){return function(...s){return se(this.canvas,r,!0)||setTimeout(()=>{const u=Fr([...s],t,this);e(this.canvas,{type:fe["2D"],property:c,args:u})},0),a.apply(this,s)}});o.push(l)}catch{const a=Ve(t.CanvasRenderingContext2D.prototype,c,{set(s){e(this.canvas,{type:fe["2D"],property:c,args:[s],setter:!0})}});o.push(a)}return()=>{o.forEach(c=>c())}}function Pr(e,t){const r=[];try{const n=ye(e.HTMLCanvasElement.prototype,"getContext",function(o){return function(i,...c){return se(this,t,!0)||"__context"in this||(this.__context=i),o.apply(this,[i,...c])}});r.push(n)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach(n=>n())}}function $r(e,t,r,n,o,i){const c=[],l=Object.getOwnPropertyNames(e);for(const a of l)try{if(typeof e[a]!="function")continue;const s=ye(e,a,function(u){return function(...d){const p=u.apply(this,d);if(Ar(p,i,e),!se(this.canvas,n,!0)){const h=Fr([...d],i,e),f={type:t,property:a,args:h};r(this.canvas,f)}return p}});c.push(s)}catch{const u=Ve(e,a,{set(d){r(this.canvas,{type:t,property:a,args:[d],setter:!0})}});c.push(u)}return c}function Ho(e,t,r,n){const o=[];return o.push(...$r(t.WebGLRenderingContext.prototype,fe.WebGL,e,r,n,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...$r(t.WebGL2RenderingContext.prototype,fe.WebGL2,e,r,n,t)),()=>{o.forEach(i=>i())}}function Xo(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function Zo(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=Xo(e,o),c=i.indexOf(`
`,10)+1,l=i.substring(c)+(n?"//# sourceMappingURL="+n:""),a=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(a)}function Ko(e,t,r){var n;return function(i){return n=n||Zo(e,t,r),new Worker(n,i)}}var Jo=Ko("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Zm9yKHZhciByPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIixsPXR5cGVvZiBVaW50OEFycmF5PiJ1Ij9bXTpuZXcgVWludDhBcnJheSgyNTYpLGY9MDtmPHIubGVuZ3RoO2YrKylsW3IuY2hhckNvZGVBdChmKV09Zjt2YXIgZD1mdW5jdGlvbihzKXt2YXIgZT1uZXcgVWludDhBcnJheShzKSxuLGE9ZS5sZW5ndGgsdD0iIjtmb3Iobj0wO248YTtuKz0zKXQrPXJbZVtuXT4+Ml0sdCs9clsoZVtuXSYzKTw8NHxlW24rMV0+PjRdLHQrPXJbKGVbbisxXSYxNSk8PDJ8ZVtuKzJdPj42XSx0Kz1yW2VbbisyXSY2M107cmV0dXJuIGElMz09PTI/dD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTEpKyI9IjphJTM9PT0xJiYodD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTIpKyI9PSIpLHR9O2NvbnN0IGM9bmV3IE1hcCx1PW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gcChzLGUpe2NvbnN0IG49YCR7c30tJHtlfWA7aWYodS5oYXMobikpcmV0dXJuIHUuZ2V0KG4pO2NvbnN0IGE9bmV3IE9mZnNjcmVlbkNhbnZhcyhzLGUpO2EuZ2V0Q29udGV4dCgiMmQiKTtjb25zdCB0PWF3YWl0KGF3YWl0IGEuY29udmVydFRvQmxvYigpKS5hcnJheUJ1ZmZlcigpLGc9ZCh0KTtyZXR1cm4gdS5zZXQobixnKSxnfWNvbnN0IGk9c2VsZjtpLm9ubWVzc2FnZT1hc3luYyBmdW5jdGlvbihzKXtpZighKCJPZmZzY3JlZW5DYW52YXMiaW4gZ2xvYmFsVGhpcykpcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOnMuZGF0YS5pZH0pO2NvbnN0e2lkOmUsYml0bWFwOm4sd2lkdGg6YSxoZWlnaHQ6dH09cy5kYXRhLGc9cChhLHQpLGg9bmV3IE9mZnNjcmVlbkNhbnZhcyhhLHQpO2guZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UobiwwLDApLG4uY2xvc2UoKTtjb25zdCB3PWF3YWl0IGguY29udmVydFRvQmxvYigpLHk9dy50eXBlLGI9YXdhaXQgdy5hcnJheUJ1ZmZlcigpLG89ZChiKTtpZighYy5oYXMoZSkmJmF3YWl0IGc9PT1vKXJldHVybiBjLnNldChlLG8pLGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpZihjLmdldChlKT09PW8pcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpLnBvc3RNZXNzYWdlKHtpZDplLHR5cGU6eSxiYXNlNjQ6byx3aWR0aDphLGhlaWdodDp0fSksYy5zZXQoZSxvKX19KSgpOwoK",null,!1),Wr=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,ei=(e,t)=>{var r={};for(var n in e)Qo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Wr)for(var n of Wr(e))t.indexOf(n)<0&&qo.call(e,n)&&(r[n]=e[n]);return r},ti=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});class ri{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(c,l)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(c)||this.pendingCanvasMutations.set(c,[]),this.pendingCanvasMutations.get(c).push(l)};const{sampling:r="all",win:n,blockClass:o,recordCanvas:i}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,i&&r==="all"&&this.initCanvasMutationObserver(n,o),i&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o)}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n){const o=Pr(r,n),i=new Map,c=new Jo;c.onmessage=d=>{const{id:p}=d.data;if(i.set(p,!1),!("base64"in d.data))return;const{base64:h,type:f,width:m,height:y}=d.data;this.mutationCb({id:p,type:fe["2D"],commands:[{property:"clearRect",args:[0,0,m,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:h}],type:f}]},0,0]}]})};const l=1e3/t;let a=0,s;const u=d=>{if(a&&d-a<l){s=requestAnimationFrame(u);return}a=d,r.document.querySelectorAll(`canvas:not(.${n} *)`).forEach(p=>ti(this,null,function*(){var h;const f=this.mirror.getId(p);if(i.get(f))return;if(i.set(f,!0),["webgl","webgl2"].includes(p.__context)){const y=p.getContext(p.__context);((h=y?.getContextAttributes())==null?void 0:h.preserveDrawingBuffer)===!1&&y?.clear(y.COLOR_BUFFER_BIT)}const m=yield createImageBitmap(p);c.postMessage({id:f,bitmap:m,width:p.width,height:p.height},[m])})),s=requestAnimationFrame(u)};s=requestAnimationFrame(u),this.resetObservers=()=>{o(),cancelAnimationFrame(s)}}initCanvasMutationObserver(t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const n=Pr(t,r),o=Yo(this.processMutation.bind(this),t,r,this.mirror),i=Ho(this.processMutation.bind(this),t,r,this.mirror);this.resetObservers=()=>{n(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;const o=n.map(c=>ei(c,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}}class ni{constructor(t){this.trackedStylesheets=new WeakSet,this.mutationCb=t.mutationCb}addStylesheet(t){this.trackedStylesheets.has(t)||(this.trackedStylesheets.add(t),this.trackStylesheet(t))}trackStylesheet(t){}attachStylesheet(t,r,n){this.mutationCb({adds:[{parentId:n.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[]}),this.addStylesheet(t)}}var oi=Object.defineProperty,ii=Object.defineProperties,si=Object.getOwnPropertyDescriptors,jr=Object.getOwnPropertySymbols,ai=Object.prototype.hasOwnProperty,li=Object.prototype.propertyIsEnumerable,Ur=(e,t,r)=>t in e?oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))ai.call(t,r)&&Ur(e,r,t[r]);if(jr)for(var r of jr(t))li.call(t,r)&&Ur(e,r,t[r]);return e},ci=(e,t)=>ii(e,si(t));function te(e){return ci(ae({},e),{timestamp:Date.now()})}let q,Ye;const de=qt();function Te(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:c="rr-ignore",maskTextClass:l="rr-mask",maskTextSelector:a=null,inlineStylesheet:s=!0,maskAllInputs:u,maskInputOptions:d,slimDOMOptions:p,maskInputFn:h,maskTextFn:f,hooks:m,packFn:y,sampling:v={},mousemoveWait:w,recordCanvas:b=!1,userTriggeredOnInput:T=!1,collectFonts:O=!1,inlineImages:I=!1,plugins:k,keepIframeSrcFn:E=()=>!1}=e;if(!t)throw new Error("emit function is required");w!==void 0&&v.mousemove===void 0&&(v.mousemove=w),de.reset();const Y=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d!==void 0?d:{password:!0},U=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};Nt();let K,$=0;const R=N=>{for(const C of k||[])C.eventProcessor&&(N=C.eventProcessor(N));return y&&(N=y(N)),N};q=(N,C)=>{var A;if(((A=Ce[0])==null?void 0:A.isFrozen())&&N.type!==x.FullSnapshot&&!(N.type===x.IncrementalSnapshot&&N.data.source===D.Mutation)&&Ce.forEach(P=>P.unfreeze()),t(R(N),C),N.type===x.FullSnapshot)K=N,$=0;else if(N.type===x.IncrementalSnapshot){if(N.data.source===D.Mutation&&N.data.isAttachIframe)return;$++;const P=n&&$>=n,H=r&&N.timestamp-K.timestamp>r;(P||H)&&Ye(!0)}};const W=N=>{q(te({type:x.IncrementalSnapshot,data:ae({source:D.Mutation},N)}))},V=N=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.Scroll},N)})),L=N=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.CanvasMutation},N)})),M=new _o({mutationCb:W}),G=new ni({mutationCb:W}),S=new ri({recordCanvas:b,mutationCb:L,win:window,blockClass:o,mirror:de,sampling:v.canvas}),g=new Vo({mutationCb:W,scrollCb:V,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:a,inlineStylesheet:s,maskInputOptions:Y,maskTextFn:f,maskInputFn:h,recordCanvas:b,inlineImages:I,sampling:v,slimDOMOptions:U,iframeManager:M,stylesheetManager:G,canvasManager:S},mirror:de});Ye=(N=!1)=>{var C,A,P,H;q(te({type:x.Meta,data:{href:window.location.href,width:bt(),height:yt()}}),N),Ce.forEach(z=>z.lock());const j=so(document,{mirror:de,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:a,inlineStylesheet:s,maskAllInputs:Y,maskTextFn:f,slimDOM:U,recordCanvas:b,inlineImages:I,onSerialize:z=>{Oe(z,de)&&M.addIframe(z),Ct(z,de)&&G.addStylesheet(z),Ge(z)&&g.addShadowRoot(z.shadowRoot,document)},onIframeLoad:(z,ie)=>{M.attachIframe(z,ie,de),g.observeAttachShadow(z)},onStylesheetLoad:(z,ie)=>{G.attachStylesheet(z,ie,de)},keepIframeSrcFn:E});if(!j)return console.warn("Failed to snapshot the document");q(te({type:x.FullSnapshot,data:{node:j,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:document?.documentElement.scrollLeft||((A=(C=document?.body)==null?void 0:C.parentElement)==null?void 0:A.scrollLeft)||document?.body.scrollLeft||0,top:window.pageYOffset!==void 0?window.pageYOffset:document?.documentElement.scrollTop||((H=(P=document?.body)==null?void 0:P.parentElement)==null?void 0:H.scrollTop)||document?.body.scrollTop||0}}})),Ce.forEach(z=>z.unlock())};try{const N=[];N.push(oe("DOMContentLoaded",()=>{q(te({type:x.DomContentLoaded,data:{}}))}));const C=P=>{var H;return Fo({mutationCb:W,mousemoveCb:(j,z)=>q(te({type:x.IncrementalSnapshot,data:{source:z,positions:j}})),mouseInteractionCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.MouseInteraction},j)})),scrollCb:V,viewportResizeCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.ViewportResize},j)})),inputCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.Input},j)})),mediaInteractionCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.MediaInteraction},j)})),styleSheetRuleCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.StyleSheetRule},j)})),styleDeclarationCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.StyleDeclaration},j)})),canvasMutationCb:L,fontCb:j=>q(te({type:x.IncrementalSnapshot,data:ae({source:D.Font},j)})),blockClass:o,ignoreClass:c,maskTextClass:l,maskTextSelector:a,maskInputOptions:Y,inlineStylesheet:s,sampling:v,recordCanvas:b,inlineImages:I,userTriggeredOnInput:T,collectFonts:O,doc:P,maskInputFn:h,maskTextFn:f,blockSelector:i,slimDOMOptions:U,mirror:de,iframeManager:M,stylesheetManager:G,shadowDomManager:g,canvasManager:S,plugins:((H=k?.filter(j=>j.observer))==null?void 0:H.map(j=>({observer:j.observer,options:j.options,callback:z=>q(te({type:x.Plugin,data:{plugin:j.name,payload:z}}))})))||[]},m)};M.addLoadListener(P=>{N.push(C(P.contentDocument))});const A=()=>{Ye(),N.push(C(document))};return document.readyState==="interactive"||document.readyState==="complete"?A():N.push(oe("load",()=>{q(te({type:x.Load,data:{}})),A()},window)),()=>{N.forEach(P=>P())}}catch(N){console.warn(N)}}Te.addCustomEvent=(e,t)=>{if(!q)throw new Error("please add custom event after start recording");q(te({type:x.Custom,data:{tag:e,payload:t}}))},Te.freezePage=()=>{Ce.forEach(e=>e.freeze())},Te.takeFullSnapshot=e=>{if(!Ye)throw new Error("please take full snapshot after start recording");Ye(e)},Te.mirror=de;var _;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(_||(_={}));var ui=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function di(){return new ui}function hi(e){const t={},r=/;(?![^(]*\))/g,n=/:(.+)/,o=/\/\*.*?\*\//g;return e.replace(o,"").split(r).forEach(function(i){if(i){const c=i.split(n);c.length>1&&(t[It(c[0].trim())]=c[1].trim())}}),t}function Vr(e){const t=[];for(const r in e){const n=e[r];if(typeof n!="string")continue;const o=vi(r);t.push(`${o}: ${n};`)}return t.join(" ")}const pi=/-([a-z])/g,mi=/^--[a-zA-Z0-9-]+$/,It=e=>mi.test(e)?e:e.replace(pi,(t,r)=>r?r.toUpperCase():""),fi=/\B([A-Z])/g,vi=e=>e.replace(fi,"-$1").toLowerCase();class le{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=J.ELEMENT_NODE,this.TEXT_NODE=J.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const r=t.childNodes,n=r.indexOf(this);return r[n+1]||null}contains(t){if(t===this)return!0;for(const r of this.childNodes)if(r.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function gi(e){return class An extends e{constructor(){super(...arguments),this.nodeType=J.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=_.Document,this.textContent=null}get documentElement(){return this.childNodes.find(r=>r.RRNodeType===_.Element&&r.tagName==="HTML")||null}get body(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===_.Element&&n.tagName==="BODY"))||null}get head(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===_.Element&&n.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(r){const n=r.RRNodeType;if((n===_.Element||n===_.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===n))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${n===_.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return r.parentElement=null,r.parentNode=this,this.childNodes.push(r),r}insertBefore(r,n){const o=r.RRNodeType;if((o===_.Element||o===_.DocumentType)&&this.childNodes.some(c=>c.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===_.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(n===null)return this.appendChild(r);const i=this.childNodes.indexOf(n);if(i==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(i,0,r),r.parentElement=null,r.parentNode=this,r}removeChild(r){const n=this.childNodes.indexOf(r);if(n===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(n,1),r.parentElement=null,r.parentNode=null,r}open(){this.childNodes=[]}close(){}write(r){let n;if(r==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?n="-//W3C//DTD XHTML 1.0 Transitional//EN":r==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(n="-//W3C//DTD HTML 4.0 Transitional//EN"),n){const o=this.createDocumentType("html",n,"");this.open(),this.appendChild(o)}}createDocument(r,n,o){return new An}createDocumentType(r,n,o){const i=new(Gr(le))(r,n,o);return i.ownerDocument=this,i}createElement(r){const n=new(Br(le))(r);return n.ownerDocument=this,n}createElementNS(r,n){return this.createElement(n)}createTextNode(r){const n=new(zr(le))(r);return n.ownerDocument=this,n}createComment(r){const n=new(Yr(le))(r);return n.ownerDocument=this,n}createCDATASection(r){const n=new(Hr(le))(r);return n.ownerDocument=this,n}toString(){return"RRDocument"}}}function Gr(e){return class extends e{constructor(t,r,n){super(),this.nodeType=J.DOCUMENT_TYPE_NODE,this.RRNodeType=_.DocumentType,this.textContent=null,this.name=t,this.publicId=r,this.systemId=n,this.nodeName=t}toString(){return"RRDocumentType"}}}function Br(e){return class extends e{constructor(t){super(),this.nodeType=J.ELEMENT_NODE,this.RRNodeType=_.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(r=>t+=r.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new bi(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?hi(this.attributes.style):{},r=/\B([A-Z])/g;return t.setProperty=(n,o,i)=>{if(r.test(n))return;const c=It(n);o?t[c]=o:delete t[c],i==="important"&&(t[c]+=" !important"),this.attributes.style=Vr(t)},t.removeProperty=n=>{if(r.test(n))return"";const o=It(n),i=t[o]||"";return delete t[o],this.attributes.style=Vr(t),i},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,r){this.attributes[t]=r}setAttributeNS(t,r,n){this.setAttribute(r,n)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,r){if(r===null)return this.appendChild(t);const n=this.childNodes.indexOf(r);if(n==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(n,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const r=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=r,r}dispatchEvent(t){return!0}toString(){let t="";for(const r in this.attributes)t+=`${r}="${this.attributes[r]}" `;return`${this.tagName} ${t}`}}}function yi(e){return class extends e{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function zr(e){return class extends e{constructor(t){super(),this.nodeType=J.TEXT_NODE,this.nodeName="#text",this.RRNodeType=_.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function Yr(e){return class extends e{constructor(t){super(),this.nodeType=J.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=_.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Hr(e){return class extends e{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=J.CDATA_SECTION_NODE,this.RRNodeType=_.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class bi{constructor(t,r){if(this.classes=[],this.add=(...n)=>{for(const o of n){const i=String(o);this.classes.indexOf(i)>=0||this.classes.push(i)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...n)=>{this.classes=this.classes.filter(o=>n.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},t){const n=t.trim().split(/\s+/);this.classes.push(...n)}this.onChange=r}}var J;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(J||(J={}));const kt={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},wi={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function he(e,t,r,n){const o=e.childNodes,i=t.childNodes;n=n||t.mirror||t.ownerDocument.mirror,(o.length>0||i.length>0)&&Xr(Array.from(o),i,e,r,n);let c=null,l=null;switch(t.RRNodeType){case _.Document:{l=t.scrollData;break}case _.Element:{const a=e,s=t;switch(Si(a,s,n),l=s.scrollData,c=s.inputData,s.tagName){case"AUDIO":case"VIDEO":{const u=e,d=s;d.paused!==void 0&&(d.paused?u.pause():u.play()),d.muted!==void 0&&(u.muted=d.muted),d.volume!==void 0&&(u.volume=d.volume),d.currentTime!==void 0&&(u.currentTime=d.currentTime);break}case"CANVAS":{const u=t;if(u.rr_dataURL!==null){const d=document.createElement("img");d.onload=()=>{const p=a.getContext("2d");p&&p.drawImage(d,0,0,d.width,d.height)},d.src=u.rr_dataURL}u.canvasMutations.forEach(d=>r.applyCanvas(d.event,d.mutation,e))}break;case"STYLE":Ni(a,t.rules);break}if(s.shadowRoot){a.shadowRoot||a.attachShadow({mode:"open"});const u=a.shadowRoot.childNodes,d=s.shadowRoot.childNodes;(u.length>0||d.length>0)&&Xr(Array.from(u),d,a.shadowRoot,r,n)}break}case _.Text:case _.Comment:case _.CDATA:e.textContent!==t.data&&(e.textContent=t.data);break}if(l&&r.applyScroll(l,!0),c&&r.applyInput(c),t.nodeName==="IFRAME"){const a=e.contentDocument,s=t;if(a){const u=n.getMeta(s.contentDocument);u&&r.mirror.add(a,Object.assign({},u)),he(a,s.contentDocument,r,n)}}}function Si(e,t,r){const n=e.attributes,o=t.attributes;for(const i in o){const c=o[i],l=r.getMeta(t);if(l&&"isSVG"in l&&l.isSVG&&kt[i])e.setAttributeNS(kt[i],i,c);else if(t.tagName==="CANVAS"&&i==="rr_dataURL"){const a=document.createElement("img");a.src=c,a.onload=()=>{const s=e.getContext("2d");s&&s.drawImage(a,0,0,a.width,a.height)}}else e.setAttribute(i,c)}for(const{name:i}of Array.from(n))i in o||e.removeAttribute(i);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}function Xr(e,t,r,n,o){var i;let c=0,l=e.length-1,a=0,s=t.length-1,u=e[c],d=e[l],p=t[a],h=t[s],f,m;for(;c<=l&&a<=s;)if(u===void 0)u=e[++c];else if(d===void 0)d=e[--l];else if(n.mirror.getId(u)===o.getId(p))he(u,p,n,o),u=e[++c],p=t[++a];else if(n.mirror.getId(d)===o.getId(h))he(d,h,n,o),d=e[--l],h=t[--s];else if(n.mirror.getId(u)===o.getId(h))r.insertBefore(u,d.nextSibling),he(u,h,n,o),u=e[++c],h=t[--s];else if(n.mirror.getId(d)===o.getId(p))r.insertBefore(d,u),he(d,p,n,o),d=e[--l],p=t[++a];else{if(!f){f={};for(let y=c;y<=l;y++){const v=e[y];v&&n.mirror.hasNode(v)&&(f[n.mirror.getId(v)]=y)}}if(m=f[o.getId(p)],m){const y=e[m];r.insertBefore(y,u),he(y,p,n,o),e[m]=void 0}else{const y=Ot(p,n.mirror,o);r.nodeName==="#document"&&((i=n.mirror.getMeta(y))===null||i===void 0?void 0:i.type)===_.Element&&r.documentElement&&(r.removeChild(r.documentElement),e[c]=void 0,u=void 0),r.insertBefore(y,u||null),he(y,p,n,o)}p=t[++a]}if(c>l){const y=t[s+1];let v=null;for(y&&r.childNodes.forEach(w=>{n.mirror.getId(w)===o.getId(y)&&(v=w)});a<=s;++a){const w=Ot(t[a],n.mirror,o);r.insertBefore(w,v),he(w,t[a],n,o)}}else if(a>s)for(;c<=l;c++){const y=e[c];y&&(r.removeChild(y),n.mirror.removeNodeFromMap(y))}}function Ot(e,t,r){let n=t.getNode(r.getId(e));const o=r.getMeta(e);if(n!==null)return n;switch(e.RRNodeType){case _.Document:n=new Document;break;case _.DocumentType:n=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case _.Element:{let i=e.tagName.toLowerCase();i=wi[i]||i,o&&"isSVG"in o&&o?.isSVG?n=document.createElementNS(kt.svg,i):n=document.createElement(e.tagName);break}case _.Text:n=document.createTextNode(e.data);break;case _.Comment:n=document.createComment(e.data);break;case _.CDATA:n=document.createCDATASection(e.data);break}return o&&t.add(n,Object.assign({},o)),n}function He(e,t){const r=e[t[0]];return t.length===1?r:He(r.cssRules[t[1]].cssRules,t.slice(2))}var ce;(function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"})(ce||(ce={}));function Zr(e){const t=[...e],r=t.pop();return{positions:t,index:r}}function Ni(e,t){const r=e.sheet;t.forEach(n=>{if(n.type===ce.Insert)try{if(Array.isArray(n.index)){const{positions:o,index:i}=Zr(n.index);He(r.cssRules,o).insertRule(n.cssText,i)}else r.insertRule(n.cssText,n.index)}catch{}else if(n.type===ce.Remove)try{if(Array.isArray(n.index)){const{positions:o,index:i}=Zr(n.index);He(r.cssRules,o).deleteRule(i||0)}else r.deleteRule(n.index)}catch{}else n.type===ce.SetProperty?He(r.cssRules,n.index).style.setProperty(n.property,n.value,n.priority):n.type===ce.RemoveProperty&&He(r.cssRules,n.index).style.removeProperty(n.property)})}class Le extends gi(le){constructor(t){super(),this._unserializedId=-1,this.mirror=Li(),this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,r,n){return new Le}createDocumentType(t,r,n){const o=new Ei(t,r,n);return o.ownerDocument=this,o}createElement(t){const r=t.toUpperCase();let n;switch(r){case"AUDIO":case"VIDEO":n=new Ci(r);break;case"IFRAME":n=new xi(r,this.mirror);break;case"CANVAS":n=new Ti(r);break;case"STYLE":n=new Mi(r);break;default:n=new Xe(r);break}return n.ownerDocument=this,n}createComment(t){const r=new ki(t);return r.ownerDocument=this,r}createCDATASection(t){const r=new Oi(t);return r.ownerDocument=this,r}createTextNode(t){const r=new Ii(t);return r.ownerDocument=this,r}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=-1}}const Ei=Gr(le);class Xe extends Br(le){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class Ci extends yi(Xe){}class Ti extends Xe{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class Mi extends Xe{constructor(){super(...arguments),this.rules=[]}}class xi extends Xe{constructor(t,r){super(t),this.contentDocument=new Le,this.contentDocument.mirror=r}}const Ii=zr(le),ki=Yr(le),Oi=Hr(le);function Di(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}function Kr(e,t,r,n){let o;switch(e.nodeType){case J.DOCUMENT_NODE:n&&n.nodeName==="IFRAME"?o=n.contentDocument:(o=t,o.compatMode=e.compatMode);break;case J.DOCUMENT_TYPE_NODE:{const c=e;o=t.createDocumentType(c.name,c.publicId,c.systemId);break}case J.ELEMENT_NODE:{const c=e,l=Di(c);o=t.createElement(l);const a=o;for(const{name:s,value:u}of Array.from(c.attributes))a.attributes[s]=u;c.scrollLeft&&(a.scrollLeft=c.scrollLeft),c.scrollTop&&(a.scrollTop=c.scrollTop);break}case J.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case J.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case J.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case J.DOCUMENT_FRAGMENT_NODE:o=n.attachShadow({mode:"open"});break;default:return null}let i=r.getMeta(e);return t instanceof Le&&(i||(i=Jr(o,t.unserializedId),r.add(e,i)),t.mirror.add(o,Object.assign({},i))),o}function Ri(e,t=di(),r=new Le){function n(o,i){const c=Kr(o,r,t,i);c!==null&&(i?.nodeName!=="IFRAME"&&o.nodeType!==J.DOCUMENT_FRAGMENT_NODE&&(i?.appendChild(c),c.parentNode=i,c.parentElement=i),o.nodeName==="IFRAME"?n(o.contentDocument,c):(o.nodeType===J.DOCUMENT_NODE||o.nodeType===J.ELEMENT_NODE||o.nodeType===J.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===J.ELEMENT_NODE&&o.shadowRoot&&n(o.shadowRoot,c),o.childNodes.forEach(l=>n(l,c))))}return n(e,null),r}function Li(){return new Ai}class Ai{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var r;if(!t)return-1;const n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){const n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)}replace(t,r){this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Jr(e,t){switch(e.RRNodeType){case _.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case _.DocumentType:{const r=e;return{id:t,type:e.RRNodeType,name:r.name,publicId:r.publicId,systemId:r.systemId}}case _.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case _.Text:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case _.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case _.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}function Qr(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}var Fi=Object.freeze({__proto__:null,default:Qr});function _i(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;const r=e.HTMLElement||e.Element,n=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||a,scrollIntoView:r.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;function c(v){const w=["MSIE ","Trident/","Edge/"];return new RegExp(w.join("|")).test(v)}const l=c(e.navigator.userAgent)?1:0;function a(v,w){this.scrollLeft=v,this.scrollTop=w}function s(v){return .5*(1-Math.cos(Math.PI*v))}function u(v){if(v===null||typeof v!="object"||v.behavior===void 0||v.behavior==="auto"||v.behavior==="instant")return!0;if(typeof v=="object"&&v.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+v.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(v,w){if(w==="Y")return v.clientHeight+l<v.scrollHeight;if(w==="X")return v.clientWidth+l<v.scrollWidth}function p(v,w){const b=e.getComputedStyle(v,null)["overflow"+w];return b==="auto"||b==="scroll"}function h(v){const w=d(v,"Y")&&p(v,"Y"),b=d(v,"X")&&p(v,"X");return w||b}function f(v){for(;v!==t.body&&h(v)===!1;)v=v.parentNode||v.host;return v}function m(v){const w=i();let b,T,O,I=(w-v.startTime)/n;I=I>1?1:I,b=s(I),T=v.startX+(v.x-v.startX)*b,O=v.startY+(v.y-v.startY)*b,v.method.call(v.scrollable,T,O),(T!==v.x||O!==v.y)&&e.requestAnimationFrame(m.bind(e,v))}function y(v,w,b){let T,O,I,k;const E=i();v===t.body?(T=e,O=e.scrollX||e.pageXOffset,I=e.scrollY||e.pageYOffset,k=o.scroll):(T=v,O=v.scrollLeft,I=v.scrollTop,k=a),m({scrollable:T,method:k,startTime:E,startX:O,startY:I,x:w,y:b})}e.scroll=e.scrollTo=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset);return}y.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset)}},e.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])){o.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}y.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(u(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const v=arguments[0].left,w=arguments[0].top;y.call(this,this,typeof v>"u"?this.scrollLeft:~~v,typeof w>"u"?this.scrollTop:~~w)},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(u(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const v=f(this),w=v.getBoundingClientRect(),b=this.getBoundingClientRect();v!==t.body?(y.call(this,v,v.scrollLeft+b.left-w.left,v.scrollTop+b.top-w.top),e.getComputedStyle(v).position!=="fixed"&&e.scrollBy({left:w.left,top:w.top,behavior:"smooth"})):e.scrollBy({left:b.left,top:b.top,behavior:"smooth"})}}class Pi{constructor(t=[],r){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=r}addAction(t){const r=this.findActionIndex(t);this.actions.splice(r,0,t)}addActions(t){this.actions=this.actions.concat(t)}start(){this.timeOffset=0;let t=performance.now();const{actions:r}=this,n=()=>{const o=performance.now();for(this.timeOffset+=(o-t)*this.speed,t=o;r.length;){const i=r[0];if(this.timeOffset>=i.delay)r.shift(),i.doAction();else break}(r.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(n))};this.raf=requestAnimationFrame(n)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return this.raf!==null}findActionIndex(t){let r=0,n=this.actions.length-1;for(;r<=n;){const o=Math.floor((r+n)/2);if(this.actions[o].delay<t.delay)r=o+1;else if(this.actions[o].delay>t.delay)n=o-1;else return o+1}return r}}function qr(e,t){if(e.type===x.IncrementalSnapshot&&e.data.source===D.MouseMove){const r=e.data.positions[0].timeOffset,n=e.timestamp+r;return e.delay=n-t,n-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function en(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(l){o={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c}var Ae;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ae||(Ae={}));var tn={type:"xstate.init"};function Dt(e){return e===void 0?[]:[].concat(e)}function Fe(e){return{type:"xstate.assign",assignment:e}}function rn(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function lt(e){return function(t){return e===t}}function nn(e){return typeof e=="string"?{type:e}:e}function on(e,t){return{value:e,context:t,actions:[],changed:!1,matches:lt(e)}}function sn(e,t,r){var n=t,o=!1;return[e.filter(function(i){if(i.type==="xstate.assign"){o=!0;var c=Object.assign({},n);return typeof i.assignment=="function"?c=i.assignment(n,r):Object.keys(i.assignment).forEach(function(l){c[l]=typeof i.assignment[l]=="function"?i.assignment[l](n,r):i.assignment[l]}),n=c,!1}return!0}),n,o]}function an(e,t){t===void 0&&(t={});var r=en(sn(Dt(e.states[e.initial].entry).map(function(c){return rn(c,t.actions)}),e.context,tn),2),n=r[0],o=r[1],i={config:e,_options:t,initialState:{value:e.initial,actions:n,context:o,matches:lt(e.initial)},transition:function(c,l){var a,s,u=typeof c=="string"?{value:c,context:e.context}:c,d=u.value,p=u.context,h=nn(l),f=e.states[d];if(f.on){var m=Dt(f.on[h.type]);try{for(var y=function(M){var G=typeof Symbol=="function"&&Symbol.iterator,S=G&&M[G],g=0;if(S)return S.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&g>=M.length&&(M=void 0),{value:M&&M[g++],done:!M}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}(m),v=y.next();!v.done;v=y.next()){var w=v.value;if(w===void 0)return on(d,p);var b=typeof w=="string"?{target:w}:w,T=b.target,O=b.actions,I=O===void 0?[]:O,k=b.cond,E=k===void 0?function(){return!0}:k,Y=T===void 0,U=T??d,K=e.states[U];if(E(p,h)){var $=en(sn((Y?Dt(I):[].concat(f.exit,I,K.entry).filter(function(M){return M})).map(function(M){return rn(M,i._options.actions)}),p,h),3),R=$[0],W=$[1],V=$[2],L=T??d;return{value:L,context:W,actions:R,changed:T!==d||R.length>0||V,matches:lt(L)}}}}catch(M){a={error:M}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}return on(d,p)}};return i}var ln=function(e,t){return e.actions.forEach(function(r){var n=r.exec;return n&&n(e.context,t)})};function cn(e){var t=e.initialState,r=Ae.NotStarted,n=new Set,o={_machine:e,send:function(i){r===Ae.Running&&(t=e.transition(t,i),ln(t,nn(i)),n.forEach(function(c){return c(t)}))},subscribe:function(i){return n.add(i),i(t),{unsubscribe:function(){return n.delete(i)}}},start:function(i){if(i){var c=typeof i=="object"?i:{context:e.config.context,value:i};t={value:c.value,actions:[],context:c.context,matches:lt(c.value)}}return r=Ae.Running,ln(t,tn),o},stop:function(){return r=Ae.Stopped,n.clear(),o},get state(){return t},get status(){return r}};return o}var $i=Object.defineProperty,Wi=Object.defineProperties,ji=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,dn=(e,t,r)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t)=>{for(var r in t||(t={}))Ui.call(t,r)&&dn(e,r,t[r]);if(un)for(var r of un(t))Vi.call(t,r)&&dn(e,r,t[r]);return e},Lt=(e,t)=>Wi(e,ji(t));function Gi(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.type===x.Meta&&n.timestamp<=t)return e.slice(r)}return e}function Bi(e,{getCastFn:t,applyEventsSynchronously:r,emitter:n}){const o=an({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Fe({lastPlayedEvent:(i,c)=>c.type==="CAST_EVENT"?c.payload.event:i.lastPlayedEvent}),recordTimeOffset:Fe((i,c)=>{let l=i.timeOffset;return"payload"in c&&"timeOffset"in c.payload&&(l=c.payload.timeOffset),Lt(Rt({},i),{timeOffset:l,baselineTime:i.events[0].timestamp+l})}),play(i){var c;const{timer:l,events:a,baselineTime:s,lastPlayedEvent:u}=i;l.clear();for(const m of a)qr(m,s);const d=Gi(a,s);let p=u?.timestamp;u?.type===x.IncrementalSnapshot&&u.data.source===D.MouseMove&&(p=u.timestamp+((c=u.data.positions[0])==null?void 0:c.timeOffset)),s<(p||0)&&n.emit(B.PlayBack);const h=new Array,f=new Array;for(const m of d)if(!(p&&p<s&&(m.timestamp<=p||m===u)))if(m.timestamp<s)h.push(m);else{const y=t(m,!1);f.push({doAction:()=>{y()},delay:m.delay})}r(h),n.emit(B.Flush),l.addActions(f),l.start()},pause(i){i.timer.clear()},resetLastPlayedEvent:Fe(i=>Lt(Rt({},i),{lastPlayedEvent:null})),startLive:Fe({baselineTime:(i,c)=>(i.timer.toggleLiveMode(!0),i.timer.start(),c.type==="TO_LIVE"&&c.payload.baselineTime?c.payload.baselineTime:Date.now())}),addEvent:Fe((i,c)=>{const{baselineTime:l,timer:a,events:s}=i;if(c.type==="ADD_EVENT"){const{event:u}=c.payload;qr(u,l);let d=s.length-1;if(!s[d]||s[d].timestamp<=u.timestamp)s.push(u);else{let f=-1,m=0;for(;m<=d;){const y=Math.floor((m+d)/2);s[y].timestamp<=u.timestamp?m=y+1:d=y-1}f===-1&&(f=m),s.splice(f,0,u)}const p=u.timestamp<l,h=t(u,p);p?h():a.isActive()&&a.addAction({doAction:()=>{h()},delay:u.delay})}return Lt(Rt({},i),{events:s})})}});return cn(o)}function zi(e){const t=an({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(r,n)=>{"payload"in n&&r.timer.setSpeed(n.payload.speed)},recordSpeed:Fe({normalSpeed:r=>r.timer.speed}),restoreSpeed:r=>{r.timer.setSpeed(r.normalSpeed)}}});return cn(t)}const Yi=e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"];var Hi=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});const hn=new Map;function pn(e,t){let r=hn.get(e);return r||(r=new Map,hn.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function be(e,t,r){return n=>Hi(this,null,function*(){if(n&&typeof n=="object"&&"rr_type"in n)if(r&&(r.isUnchanged=!1),n.rr_type==="ImageBitmap"&&"args"in n){const o=yield be(e,t,r)(n.args);return yield createImageBitmap.apply(null,o)}else if("index"in n){if(r||t===null)return n;const{rr_type:o,index:i}=n;return pn(t,o)[i]}else if("args"in n){const{rr_type:o,args:i}=n,c=window[o];return new c(...yield Promise.all(i.map(be(e,t,r))))}else{if("base64"in n)return Bo(n.base64);if("src"in n){const o=e.get(n.src);if(o)return o;{const i=new Image;return i.src=n.src,e.set(n.src,i),i}}else if("data"in n&&n.rr_type==="Blob"){const o=yield Promise.all(n.data.map(be(e,t,r)));return new Blob(o,{type:n.type})}}else if(Array.isArray(n))return yield Promise.all(n.map(be(e,t,r)));return n})}var Xi=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});function Zi(e,t){try{return t===fe.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch{return null}}const Ki=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Ji(e,t){if(!(t!=null&&t.constructor))return;const{name:r}=t.constructor;if(!Ki.includes(r))return;const n=pn(e,r);n.includes(t)||n.push(t)}function Qi(e){return Xi(this,arguments,function*({mutation:t,target:r,type:n,imageMap:o,errorHandler:i}){try{const c=Zi(r,n);if(!c)return;if(t.setter){c[t.property]=t.args[0];return}const l=c[t.property],a=yield Promise.all(t.args.map(be(o,c))),s=l.apply(c,a);Ji(c,s)}catch(c){i(t,c)}})}var qi=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});function es(e){return qi(this,arguments,function*({event:t,mutation:r,target:n,imageMap:o,errorHandler:i}){try{const c=n.getContext("2d");if(r.setter){c[r.property]=r.args[0];return}const l=c[r.property];if(r.property==="drawImage"&&typeof r.args[0]=="string")o.get(t),l.apply(c,r.args);else{const a=yield Promise.all(r.args.map(be(o,c)));l.apply(c,a)}}catch(c){i(r,c)}})}var ts=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});function mn(e){return ts(this,arguments,function*({event:t,mutation:r,target:n,imageMap:o,canvasEventMap:i,errorHandler:c}){try{const l=i.get(t)||r,a="commands"in l?l.commands:[l];if([fe.WebGL,fe.WebGL2].includes(r.type)){for(let s=0;s<a.length;s++){const u=a[s];yield Qi({mutation:u,type:r.type,target:n,imageMap:o,errorHandler:c})}return}for(let s=0;s<a.length;s++){const u=a[s];yield es({event:t,mutation:u,target:n,imageMap:o,errorHandler:c})}}catch(l){c(r,l)}})}var rs=Object.defineProperty,ns=Object.defineProperties,os=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,is=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable,vn=(e,t,r)=>t in e?rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))is.call(t,r)&&vn(e,r,t[r]);if(fn)for(var r of fn(t))ss.call(t,r)&&vn(e,r,t[r]);return e},At=(e,t)=>ns(e,os(t)),Ft=(e,t,r)=>new Promise((n,o)=>{var i=a=>{try{l(r.next(a))}catch(s){o(s)}},c=a=>{try{l(r.throw(a))}catch(s){o(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((r=r.apply(e,t)).next())});const as=10*1e3,ls=5*1e3,cs=Qr||Fi,_t="[replayer]",Pt={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function gn(e){return e.type==x.IncrementalSnapshot&&(e.data.source==D.TouchMove||e.data.source==D.MouseInteraction&&e.data.type==ee.TouchStart)}class us{constructor(t,r){if(this.usingVirtualDom=!1,this.virtualDom=new Le,this.mouseTail=null,this.tailPositions=[],this.emitter=cs(),this.legacy_missingNodeRetryMap={},this.cache=lr(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=qt(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.handleResize=l=>{this.iframe.style.display="inherit";for(const a of[this.mouseTail,this.iframe])!a||(a.setAttribute("width",String(l.width)),a.setAttribute("height",String(l.height)))},this.applyEventsSynchronously=l=>{for(const a of l){switch(a.type){case x.DomContentLoaded:case x.Load:case x.Custom:continue;case x.FullSnapshot:case x.Meta:case x.Plugin:case x.IncrementalSnapshot:break}this.getCastFn(a,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(l,a=!1)=>{let s;switch(l.type){case x.DomContentLoaded:case x.Load:break;case x.Custom:s=()=>{this.emitter.emit(B.CustomEvent,l)};break;case x.Meta:s=()=>this.emitter.emit(B.Resize,{width:l.data.width,height:l.data.height});break;case x.FullSnapshot:s=()=>{if(this.firstFullSnapshot){if(this.firstFullSnapshot===l){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(l,a),this.iframe.contentWindow.scrollTo(l.data.initialOffset)};break;case x.IncrementalSnapshot:s=()=>{if(this.applyIncremental(l,a),!a&&(l===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const u of this.service.state.context.events)if(!(u.timestamp<=l.timestamp)&&this.isUserInteraction(u)){u.delay-l.delay>as*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=u);break}if(this.nextUserInteractionEvent){const u=this.nextUserInteractionEvent.delay-l.delay,d={speed:Math.min(Math.round(u/ls),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(B.SkipStart,d)}}};break}return()=>{s&&s();for(const d of this.config.plugins||[])d.handler(l,a,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:l}});const u=this.service.state.context.events.length-1;if(l===this.service.state.context.events[u]){const d=()=>{u<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(B.Finish))};l.type===x.IncrementalSnapshot&&l.data.source===D.MouseMove&&l.data.positions.length?setTimeout(()=>{d()},Math.max(0,-l.data.positions[0].timeOffset+50)):d()}this.emitter.emit(B.EventCast,l)}},!(r!=null&&r.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Pt,useVirtualDom:!0};this.config=Object.assign({},n,r),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(B.Resize,this.handleResize),this.setupDom(),this.emitter.on(B.Flush,()=>{if(this.usingVirtualDom){const l={mirror:this.mirror,applyCanvas:(a,s,u)=>{mn({event:a,mutation:s,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this)};if(he(this.iframe.contentDocument,this.virtualDom,l,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const a in this.legacy_missingNodeRetryMap)try{const s=this.legacy_missingNodeRetryMap[a],u=Ot(s.node,this.mirror,this.virtualDom.mirror);he(u,s.node,l,this.virtualDom.mirror),s.node=u}catch(s){this.config.showWarning&&console.warn(s)}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null}),this.emitter.on(B.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset()});const o=new Pi([],r?.speed||n.speed);this.service=Bi({events:t.map(l=>r&&r.unpackFn?r.unpackFn(l):l).sort((l,a)=>l.timestamp-a.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(l=>{this.emitter.emit(B.StateChange,{player:l})}),this.speedService=zi({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(l=>{this.emitter.emit(B.StateChange,{speed:l})});const i=this.service.state.context.events.find(l=>l.type===x.Meta),c=this.service.state.context.events.find(l=>l.type===x.FullSnapshot);if(i){const{width:l,height:a}=i.data;setTimeout(()=>{this.emitter.emit(B.Resize,{width:l,height:a})},0)}c&&setTimeout(()=>{this.firstFullSnapshot||(this.firstFullSnapshot=c,this.rebuildFullSnapshot(c),this.iframe.contentWindow.scrollTo(c.data.initialOffset))},1),this.service.state.context.events.find(gn)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,r){return this.emitter.on(t,r),this}off(t,r){return this.emitter.off(t,r),this}setConfig(t){Object.keys(t).forEach(r=>{t[r],this.config[r]=t[r]}),this.config.skipInactive||this.backToNormal(),typeof t.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),typeof t.mouseTail<"u"&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],r=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:r.timestamp,totalTime:r.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:r}=this.service.state.context;return t-r[0].timestamp}getMirror(){return this.mirror}play(t=0){var r,n;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:t}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.remove("rrweb-paused"),this.emitter.emit(B.Start)}pause(t){var r,n;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.add("rrweb-paused"),this.emitter.emit(B.Pause)}resume(t=0){console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(B.Resume)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const r=this.config.unpackFn?this.config.unpackFn(t):t;gn(r)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:r}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=lr()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(_i(this.iframe.contentWindow,this.iframe.contentDocument),Nt(this.iframe.contentWindow))}rebuildFullSnapshot(t,r=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[];fo(t.data.node,{doc:this.iframe.contentDocument,afterAppend:c=>{this.collectIframeAndAttachDocument(n,c)},cache:this.cache,mirror:this.mirror});for(const{mutationInQueue:c,builtNode:l}of n)this.attachDocumentToIframe(c,l),this.newDocumentQueue=this.newDocumentQueue.filter(a=>a!==c);const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(B.FullsnapshotRebuilded,t),r||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,r){const n=Yi(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&n.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const o=this.virtualDom.createElement("style");this.virtualDom.mirror.add(o,Jr(o,this.virtualDom.unserializedId)),t.insertBefore(o,r);for(let i=0;i<n.length;i++)o.rules.push({cssText:n[i],type:ce.Insert,index:i})}else{const o=document.createElement("style");t.insertBefore(o,r);for(let i=0;i<n.length;i++)o.sheet.insertRule(n[i],i)}}attachDocumentToIframe(t,r){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[];nt(t.node,{doc:r.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:i=>{this.collectIframeAndAttachDocument(o,i);const c=n.getMeta(i);if(c?.type===F.Element&&c?.tagName.toUpperCase()==="HTML"){const{documentElement:l,head:a}=r.contentDocument;this.insertStyleRules(l,a)}},cache:this.cache});for(const{mutationInQueue:i,builtNode:c}of o)this.attachDocumentToIframe(i,c),this.newDocumentQueue=this.newDocumentQueue.filter(l=>l!==i)}collectIframeAndAttachDocument(t,r){if(Oe(r,this.mirror)){const n=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(r));n&&t.push({mutationInQueue:n,builtNode:r})}}waitForStylesheetLoad(){var t;const r=(t=this.iframe.contentDocument)==null?void 0:t.head;if(r){const n=new Set;let o,i=this.service.state;const c=()=>{i=this.service.state};this.emitter.on(B.Start,c),this.emitter.on(B.Pause,c);const l=()=>{this.emitter.off(B.Start,c),this.emitter.off(B.Pause,c)};r.querySelectorAll('link[rel="stylesheet"]').forEach(a=>{a.sheet||(n.add(a),a.addEventListener("load",()=>{n.delete(a),n.size===0&&o!==-1&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(B.LoadStylesheetEnd),o&&clearTimeout(o),l())}))}),n.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(B.LoadStylesheetStart),o=setTimeout(()=>{i.matches("playing")&&this.play(this.getCurrentTime()),o=-1,l()},this.config.loadTimeout))}}preloadAllImages(){return Ft(this,null,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(B.Start,t),this.emitter.on(B.Pause,t);const r=[];for(const n of this.service.state.context.events)n.type===x.IncrementalSnapshot&&n.data.source===D.CanvasMutation&&(r.push(this.deserializeAndPreloadCanvasEvents(n.data,n)),("commands"in n.data?n.data.commands:[n.data]).forEach(o=>{this.preloadImages(o,n)}));return Promise.all(r)})}preloadImages(t,r){if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(r)){const n=document.createElement("canvas"),o=n.getContext("2d"),i=o?.createImageData(n.width,n.height);i?.data,JSON.parse(t.args[0]),o?.putImageData(i,0,0)}}deserializeAndPreloadCanvasEvents(t,r){return Ft(this,null,function*(){if(!this.canvasEventMap.has(r)){const n={isUnchanged:!0};if("commands"in t){const o=yield Promise.all(t.commands.map(i=>Ft(this,null,function*(){const c=yield Promise.all(i.args.map(be(this.imageMap,null,n)));return At(_e({},i),{args:c})})));n.isUnchanged===!1&&this.canvasEventMap.set(r,At(_e({},t),{commands:o}))}else{const o=yield Promise.all(t.args.map(be(this.imageMap,null,n)));n.isUnchanged===!1&&this.canvasEventMap.set(r,At(_e({},t),{args:o}))}}})}applyIncremental(t,r){var n,o,i,c,l,a;const{data:s}=t;switch(s.source){case D.Mutation:{try{this.applyMutation(s,r)}catch(u){this.warn(`Exception in mutation ${u.message||u}`,s)}break}case D.Drag:case D.TouchMove:case D.MouseMove:if(r){const u=s.positions[s.positions.length-1];this.mousePos={x:u.x,y:u.y,id:u.id,debugData:s}}else s.positions.forEach(u=>{const d={doAction:()=>{this.moveAndHover(u.x,u.y,u.id,r,s)},delay:u.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(d)}),this.timer.addAction({doAction(){},delay:t.delay-((n=s.positions[0])==null?void 0:n.timeOffset)});break;case D.MouseInteraction:{if(s.id===-1||r)break;const u=new Event(ee[s.type].toLowerCase()),d=this.mirror.getNode(s.id);if(!d)return this.debugNodeNotFound(s,s.id);this.emitter.emit(B.MouseInteraction,{type:s.type,target:d});const{triggerFocus:p}=this.config;switch(s.type){case ee.Blur:"blur"in d&&d.blur();break;case ee.Focus:p&&d.focus&&d.focus({preventScroll:!0});break;case ee.Click:case ee.TouchStart:case ee.TouchEnd:r?(s.type===ee.TouchStart?this.touchActive=!0:s.type===ee.TouchEnd&&(this.touchActive=!1),this.mousePos={x:s.x,y:s.y,id:s.id,debugData:s}):(s.type===ee.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(s.x,s.y,s.id,r,s),s.type===ee.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):s.type===ee.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):s.type===ee.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case ee.TouchCancel:r?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:d.dispatchEvent(u)}break}case D.Scroll:{if(s.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.scrollData=s;break}this.applyScroll(s,r);break}case D.ViewportResize:this.emitter.emit(B.Resize,{width:s.width,height:s.height});break;case D.Input:{if(s.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.inputData=s;break}this.applyInput(s);break}case D.MediaInteraction:{const u=this.usingVirtualDom?this.virtualDom.mirror.getNode(s.id):this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u;try{s.currentTime&&(d.currentTime=s.currentTime),s.volume&&(d.volume=s.volume),s.muted&&(d.muted=s.muted),s.type===Ee.Pause&&d.pause(),s.type===Ee.Play&&d.play()}catch(p){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${p.message||p}`)}break}case D.StyleSheetRule:{if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.rules;(o=s.adds)==null||o.forEach(({rule:p,index:h})=>d?.push({cssText:p,index:h,type:ce.Insert})),(i=s.removes)==null||i.forEach(({index:p})=>d?.push({index:p,type:ce.Remove}))}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.sheet;(c=s.adds)==null||c.forEach(({rule:p,index:h})=>{try{if(Array.isArray(h)){const{positions:f,index:m}=Mt(h);De(d.cssRules,f).insertRule(p,m)}else{const f=h===void 0?void 0:Math.min(h,d.cssRules.length);d.insertRule(p,f)}}catch{}}),(l=s.removes)==null||l.forEach(({index:p})=>{try{if(Array.isArray(p)){const{positions:h,index:f}=Mt(p);De(d.cssRules,h).deleteRule(f||0)}else d?.deleteRule(p)}catch{}})}break}case D.StyleDeclaration:{if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.rules;s.set&&d.push(_e({type:ce.SetProperty,index:s.index},s.set)),s.remove&&d.push(_e({type:ce.RemoveProperty,index:s.index},s.remove))}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.sheet;s.set&&De(d.rules,s.index).style.setProperty(s.set.property,s.set.value,s.set.priority),s.remove&&De(d.rules,s.index).style.removeProperty(s.remove.property)}break}case D.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.canvasMutations.push({event:t,mutation:s})}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);mn({event:t,mutation:s,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case D.Font:{try{const u=new FontFace(s.family,s.buffer?new Uint8Array(JSON.parse(s.fontSource)):s.fontSource,s.descriptors);(a=this.iframe.contentDocument)==null||a.fonts.add(u)}catch(u){this.config.showWarning&&console.warn(u)}break}}}applyMutation(t,r){if(this.config.useVirtualDom&&!this.usingVirtualDom&&r&&(this.usingVirtualDom=!0,Ri(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const s in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[s],d=Kr(u.node,this.virtualDom,this.mirror);d&&(u.node=d)}catch(u){this.config.showWarning&&console.warn(u)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(s=>{var u;const d=n.getNode(s.id);if(!d)return t.removes.find(h=>h.id===s.parentId)?void 0:this.warnNodeNotFound(t,s.id);let p=n.getNode(s.parentId);if(!p)return this.warnNodeNotFound(t,s.parentId);if(s.isShadow&&Ge(p)&&(p=p.shadowRoot),n.removeNodeFromMap(d),p)try{p.removeChild(d),this.usingVirtualDom&&d.nodeName==="#text"&&p.nodeName==="STYLE"&&((u=p.rules)==null?void 0:u.length)>0&&(p.rules=[])}catch(h){if(h instanceof DOMException)this.warn("parent could not remove child in mutation",p,d,t);else throw h}});const o=_e({},this.legacy_missingNodeRetryMap),i=[],c=s=>{let u=null;return s.nextId&&(u=n.getNode(s.nextId)),s.nextId!==null&&s.nextId!==void 0&&s.nextId!==-1&&!u},l=s=>{var u;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let d=n.getNode(s.parentId);if(!d)return s.node.type===F.Document?this.newDocumentQueue.push(s):i.push(s);s.node.isShadow&&(Ge(d)||d.attachShadow({mode:"open"}),d=d.shadowRoot);let p=null,h=null;if(s.previousId&&(p=n.getNode(s.previousId)),s.nextId&&(h=n.getNode(s.nextId)),c(s))return i.push(s);if(s.node.rootId&&!n.getNode(s.node.rootId))return;const f=s.node.rootId?n.getNode(s.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Oe(d,n)){this.attachDocumentToIframe(s,d);return}const m=nt(s.node,{doc:f,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache});if(s.previousId===-1||s.nextId===-1){o[s.node.id]={node:m,mutation:s};return}const y=n.getMeta(d);if(y&&y.type===F.Element&&y.tagName==="textarea"&&s.node.type===F.Text){const v=Array.isArray(d.childNodes)?d.childNodes:Array.from(d.childNodes);for(const w of v)w.nodeType===d.TEXT_NODE&&d.removeChild(w)}if(p&&p.nextSibling&&p.nextSibling.parentNode)d.insertBefore(m,p.nextSibling);else if(h&&h.parentNode)d.contains(h)?d.insertBefore(m,h):d.insertBefore(m,null);else{if(d===f)for(;f.firstChild;)f.removeChild(f.firstChild);d.appendChild(m)}if(this.usingVirtualDom&&m.nodeName==="#text"&&d.nodeName==="STYLE"&&((u=d.rules)==null?void 0:u.length)>0&&(d.rules=[]),Oe(m,this.mirror)){const v=this.mirror.getId(m),w=this.newDocumentQueue.find(b=>b.parentId===v);w&&(this.attachDocumentToIframe(w,m),this.newDocumentQueue=this.newDocumentQueue.filter(b=>b!==w))}(s.previousId||s.nextId)&&this.legacy_resolveMissingNode(o,d,m,s)};t.adds.forEach(s=>{l(s)});const a=Date.now();for(;i.length;){const s=ur(i);if(i.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",s);break}for(const u of s)n.getNode(u.value.parentId)?Et(u,d=>{l(d)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),dr(t.texts).forEach(s=>{var u;const d=n.getNode(s.id);if(!d)return t.removes.find(p=>p.id===s.id)?void 0:this.warnNodeNotFound(t,s.id);if(d.textContent=s.value,this.usingVirtualDom){const p=d.parentNode;((u=p?.rules)==null?void 0:u.length)>0&&(p.rules=[])}}),t.attributes.forEach(s=>{const u=n.getNode(s.id);if(!u)return t.removes.find(d=>d.id===s.id)?void 0:this.warnNodeNotFound(t,s.id);for(const d in s.attributes)if(typeof d=="string"){const p=s.attributes[d];if(p===null)u.removeAttribute(d);else if(typeof p=="string")try{u.setAttribute(d,p)}catch(h){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",h)}else if(d==="style"){const h=p,f=u;for(const m in h)if(h[m]===!1)f.style.removeProperty(m);else if(h[m]instanceof Array){const y=h[m];f.style.setProperty(m,y[0],y[1])}else{const y=h[m];f.style.setProperty(m,y)}}}})}applyScroll(t,r){const n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);const o=this.mirror.getMeta(n);if(n===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:t.y,left:t.x,behavior:r?"auto":"smooth"});else if(o?.type===F.Document)n.defaultView.scrollTo({top:t.y,left:t.x,behavior:r?"auto":"smooth"});else try{n.scrollTop=t.y,n.scrollLeft=t.x}catch{}}applyInput(t){const r=this.mirror.getNode(t.id);if(!r)return this.debugNodeNotFound(t,t.id);try{r.checked=t.isChecked,r.value=t.text}catch{}}legacy_resolveMissingNode(t,r,n,o){const{previousId:i,nextId:c}=o,l=i&&t[i],a=c&&t[c];if(l){const{node:s,mutation:u}=l;r.insertBefore(s,n),delete t[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(t,r,s,u)}if(a){const{node:s,mutation:u}=a;r.insertBefore(s,n.nextSibling),delete t[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(t,r,s,u)}}moveAndHover(t,r,n,o,i){const c=this.mirror.getNode(n);if(!c)return this.debugNodeNotFound(i,n);const l=Tt(c,this.iframe),a=t*l.absoluteScale+l.x,s=r*l.absoluteScale+l.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${s}px`,o||this.drawMouseTail({x:a,y:s}),this.hoverElements(c)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:r,lineWidth:n,strokeStyle:o,duration:i}=this.config.mouseTail===!0?Pt:Object.assign({},Pt,this.config.mouseTail),c=()=>{if(!this.mouseTail)return;const l=this.mouseTail.getContext("2d");!l||!this.tailPositions.length||(l.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),l.beginPath(),l.lineWidth=n,l.lineCap=r,l.strokeStyle=o,l.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(a=>l.lineTo(a.x,a.y)),l.stroke())};this.tailPositions.push(t),c(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(l=>l!==t),c()},i/this.speedService.state.context.timer.speed)}hoverElements(t){var r;(r=this.iframe.contentDocument)==null||r.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")});let n=t;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(t){return t.type!==x.IncrementalSnapshot?!1:t.data.source>D.Mutation&&t.data.source<=D.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(B.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,r){this.warn(`Node with id '${r}' not found. `,t)}warnCanvasMutationFailed(t,r){this.warn("Has error on canvas update",r,"canvas mutation:",t)}debugNodeNotFound(t,r){this.debug(_t,`Node with id '${r}' not found. `,t)}warn(...t){!this.config.showWarning||console.warn(_t,...t)}debug(...t){!this.config.showDebug||console.log(_t,...t)}}const{addCustomEvent:ds}=Te,{freezePage:hs}=Te;var re=Uint8Array,ne=Uint16Array,Ze=Uint32Array,ct=new re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ut=new re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$t=new re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yn=function(e,t){for(var r=new ne(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new Ze(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},bn=yn(ct,2),wn=bn[0],Wt=bn[1];wn[28]=258,Wt[258]=28;for(var Sn=yn(ut,0),ps=Sn[0],Nn=Sn[1],jt=new ne(32768),Z=0;Z<32768;++Z){var we=(Z&43690)>>>1|(Z&21845)<<1;we=(we&52428)>>>2|(we&13107)<<2,we=(we&61680)>>>4|(we&3855)<<4,jt[Z]=((we&65280)>>>8|(we&255)<<8)>>>1}for(var pe=function(e,t,r){for(var n=e.length,o=0,i=new ne(t);o<n;++o)++i[e[o]-1];var c=new ne(t);for(o=0;o<t;++o)c[o]=c[o-1]+i[o-1]<<1;var l;if(r){l=new ne(1<<t);var a=15-t;for(o=0;o<n;++o)if(e[o])for(var s=o<<4|e[o],u=t-e[o],d=c[e[o]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)l[jt[d]>>>a]=s}else for(l=new ne(n),o=0;o<n;++o)l[o]=jt[c[e[o]-1]++]>>>15-e[o];return l},Se=new re(288),Z=0;Z<144;++Z)Se[Z]=8;for(var Z=144;Z<256;++Z)Se[Z]=9;for(var Z=256;Z<280;++Z)Se[Z]=7;for(var Z=280;Z<288;++Z)Se[Z]=8;for(var Ke=new re(32),Z=0;Z<32;++Z)Ke[Z]=5;var ms=pe(Se,9,0),fs=pe(Se,9,1),vs=pe(Ke,5,0),gs=pe(Ke,5,1),Ut=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ue=function(e,t,r){var n=t/8>>0;return(e[n]|e[n+1]<<8)>>>(t&7)&r},Vt=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Gt=function(e){return(e/8>>0)+(e&7&&1)},Bt=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e instanceof ne?ne:e instanceof Ze?Ze:re)(r-t);return n.set(e.subarray(t,r)),n},ys=function(e,t,r){var n=e.length,o=!t||r,i=!r||r.i;r||(r={}),t||(t=new re(n*3));var c=function(j){var z=t.length;if(j>z){var ie=new re(Math.max(z*2,j));ie.set(t),t=ie}},l=r.f||0,a=r.p||0,s=r.b||0,u=r.l,d=r.d,p=r.m,h=r.n,f=n*8;do{if(!u){r.f=l=ue(e,a,1);var m=ue(e,a+1,3);if(a+=3,m)if(m==1)u=fs,d=gs,p=9,h=5;else if(m==2){var b=ue(e,a,31)+257,T=ue(e,a+10,15)+4,O=b+ue(e,a+5,31)+1;a+=14;for(var I=new re(O),k=new re(19),E=0;E<T;++E)k[$t[E]]=ue(e,a+E*3,7);a+=T*3;var Y=Ut(k),U=(1<<Y)-1;if(!i&&a+O*(Y+7)>f)break;for(var K=pe(k,Y,1),E=0;E<O;){var $=K[ue(e,a,U)];a+=$&15;var y=$>>>4;if(y<16)I[E++]=y;else{var R=0,W=0;for(y==16?(W=3+ue(e,a,3),a+=2,R=I[E-1]):y==17?(W=3+ue(e,a,7),a+=3):y==18&&(W=11+ue(e,a,127),a+=7);W--;)I[E++]=R}}var V=I.subarray(0,b),L=I.subarray(b);p=Ut(V),h=Ut(L),u=pe(V,p,1),d=pe(L,h,1)}else throw"invalid block type";else{var y=Gt(a)+4,v=e[y-4]|e[y-3]<<8,w=y+v;if(w>n){if(i)throw"unexpected EOF";break}o&&c(s+v),t.set(e.subarray(y,w),s),r.b=s+=v,r.p=a=w*8;continue}if(a>f)throw"unexpected EOF"}o&&c(s+131072);for(var M=(1<<p)-1,G=(1<<h)-1,S=p+h+18;i||a+S<f;){var R=u[Vt(e,a)&M],g=R>>>4;if(a+=R&15,a>f)throw"unexpected EOF";if(!R)throw"invalid length/literal";if(g<256)t[s++]=g;else if(g==256){u=null;break}else{var N=g-254;if(g>264){var E=g-257,C=ct[E];N=ue(e,a,(1<<C)-1)+wn[E],a+=C}var A=d[Vt(e,a)&G],P=A>>>4;if(!A)throw"invalid distance";a+=A&15;var L=ps[P];if(P>3){var C=ut[P];L+=Vt(e,a)&(1<<C)-1,a+=C}if(a>f)throw"unexpected EOF";o&&c(s+131072);for(var H=s+N;s<H;s+=4)t[s]=t[s-L],t[s+1]=t[s+1-L],t[s+2]=t[s+2-L],t[s+3]=t[s+3-L];s=H}}r.l=u,r.p=a,r.b=s,u&&(l=1,r.m=p,r.d=d,r.n=h)}while(!l);return s==t.length?t:Bt(t,0,s)},ve=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},Je=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},zt=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,i=r.slice();if(!o)return[new re(0),0];if(o==1){var c=new re(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(O,I){return O.f-I.f}),r.push({s:-1,f:25001});var l=r[0],a=r[1],s=0,u=1,d=2;for(r[0]={s:-1,f:l.f+a.f,l,r:a};u!=o-1;)l=r[r[s].f<r[d].f?s++:d++],a=r[s!=u&&r[s].f<r[d].f?s++:d++],r[u++]={s:-1,f:l.f+a.f,l,r:a};for(var p=i[0].s,n=1;n<o;++n)i[n].s>p&&(p=i[n].s);var h=new ne(p+1),f=Yt(r[u-1],h,0);if(f>t){var n=0,m=0,y=f-t,v=1<<y;for(i.sort(function(I,k){return h[k.s]-h[I.s]||I.f-k.f});n<o;++n){var w=i[n].s;if(h[w]>t)m+=v-(1<<f-h[w]),h[w]=t;else break}for(m>>>=y;m>0;){var b=i[n].s;h[b]<t?m-=1<<t-h[b]++-1:++n}for(;n>=0&&m;--n){var T=i[n].s;h[T]==t&&(--h[T],++m)}f=t}return[new re(h),f]},Yt=function(e,t,r){return e.s==-1?Math.max(Yt(e.l,t,r+1),Yt(e.r,t,r+1)):t[e.s]=r},En=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ne(++t),n=0,o=e[0],i=1,c=function(a){r[n++]=a},l=1;l<=t;++l)if(e[l]==o&&l!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(o),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(o);i=1,o=e[l]}return[r.subarray(0,n),t]},Qe=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},dt=function(e,t,r){var n=r.length,o=Gt(t+2);e[o]=n&255,e[o+1]=n>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var i=0;i<n;++i)e[o+i+4]=r[i];return(o+4+n)*8},Cn=function(e,t,r,n,o,i,c,l,a,s,u){ve(t,u++,r),++o[256];for(var d=zt(o,15),p=d[0],h=d[1],f=zt(i,15),m=f[0],y=f[1],v=En(p),w=v[0],b=v[1],T=En(m),O=T[0],I=T[1],k=new ne(19),E=0;E<w.length;++E)k[w[E]&31]++;for(var E=0;E<O.length;++E)k[O[E]&31]++;for(var Y=zt(k,7),U=Y[0],K=Y[1],$=19;$>4&&!U[$t[$-1]];--$);var R=s+5<<3,W=Qe(o,Se)+Qe(i,Ke)+c,V=Qe(o,p)+Qe(i,m)+c+14+3*$+Qe(k,U)+(2*k[16]+3*k[17]+7*k[18]);if(R<=W&&R<=V)return dt(t,u,e.subarray(a,a+s));var L,M,G,S;if(ve(t,u,1+(V<W)),u+=2,V<W){L=pe(p,h,0),M=p,G=pe(m,y,0),S=m;var g=pe(U,K,0);ve(t,u,b-257),ve(t,u+5,I-1),ve(t,u+10,$-4),u+=14;for(var E=0;E<$;++E)ve(t,u+3*E,U[$t[E]]);u+=3*$;for(var N=[w,O],C=0;C<2;++C)for(var A=N[C],E=0;E<A.length;++E){var P=A[E]&31;ve(t,u,g[P]),u+=U[P],P>15&&(ve(t,u,A[E]>>>5&127),u+=A[E]>>>12)}}else L=ms,M=Se,G=vs,S=Ke;for(var E=0;E<l;++E)if(n[E]>255){var P=n[E]>>>18&31;Je(t,u,L[P+257]),u+=M[P+257],P>7&&(ve(t,u,n[E]>>>23&31),u+=ct[P]);var H=n[E]&31;Je(t,u,G[H]),u+=S[H],H>3&&(Je(t,u,n[E]>>>5&8191),u+=ut[H])}else Je(t,u,L[n[E]]),u+=M[n[E]];return Je(t,u,L[256]),u+M[256]},bs=new Ze([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ws=new re(0),Ss=function(e,t,r,n,o,i){var c=e.length,l=new re(n+c+5*(1+Math.floor(c/7e3))+o),a=l.subarray(n,l.length-o),s=0;if(!t||c<8)for(var u=0;u<=c;u+=65535){var d=u+65535;d<c?s=dt(a,s,e.subarray(u,d)):(a[u]=i,s=dt(a,s,e.subarray(u,c)))}else{for(var p=bs[t-1],h=p>>>13,f=p&8191,m=(1<<r)-1,y=new ne(32768),v=new ne(m+1),w=Math.ceil(r/3),b=2*w,T=function(Jt){return(e[Jt]^e[Jt+1]<<w^e[Jt+2]<<b)&m},O=new Ze(25e3),I=new ne(288),k=new ne(32),E=0,Y=0,u=0,U=0,K=0,$=0;u<c;++u){var R=T(u),W=u&32767,V=v[R];if(y[W]=V,v[R]=W,K<=u){var L=c-u;if((E>7e3||U>24576)&&L>423){s=Cn(e,a,0,O,I,k,Y,U,$,u-$,s),U=E=Y=0,$=u;for(var M=0;M<286;++M)I[M]=0;for(var M=0;M<30;++M)k[M]=0}var G=2,S=0,g=f,N=W-V&32767;if(L>2&&R==T(u-N))for(var C=Math.min(h,L)-1,A=Math.min(32767,u),P=Math.min(258,L);N<=A&&--g&&W!=V;){if(e[u+G]==e[u+G-N]){for(var H=0;H<P&&e[u+H]==e[u+H-N];++H);if(H>G){if(G=H,S=N,H>C)break;for(var j=Math.min(N,H-2),z=0,M=0;M<j;++M){var ie=u-N+M+32768&32767,Ne=y[ie],$e=ie-Ne+32768&32767;$e>z&&(z=$e,V=ie)}}}W=V,V=y[W],N+=W-V+32768&32767}if(S){O[U++]=268435456|Wt[G]<<18|Nn[S];var qe=Wt[G]&31,ge=Nn[S]&31;Y+=ct[qe]+ut[ge],++I[257+qe],++k[ge],K=u+G,++E}else O[U++]=e[u],++I[e[u]]}}s=Cn(e,a,i,O,I,k,Y,U,$,u-$,s),i||(s=dt(a,s,ws))}return Bt(l,0,n+Gt(s)+o)},Ns=function(){var e=1,t=0;return{p:function(r){for(var n=e,o=t,i=r.length,c=0;c!=i;){for(var l=Math.min(c+5552,i);c<l;++c)n+=r[c],o+=n;n%=65521,o%=65521}e=n,t=o},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},Es=function(e,t,r,n,o){return Ss(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,n,!o)},Cs=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Ts=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)},Ms=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function xs(e,t){t===void 0&&(t={});var r=Ns();r.p(e);var n=Es(e,t,2,4);return Ts(n,t),Cs(n,n.length-4,r.d()),n}function Is(e,t){return ys((Ms(e),e.subarray(2,-4)),t)}function Tn(e,t){var r=e.length;if(!t&&typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var n=new re(e.length+(e.length>>>1)),o=0,i=function(s){n[o++]=s},c=0;c<r;++c){if(o+5>n.length){var l=new re(o+8+(r-c<<1));l.set(n),n=l}var a=e.charCodeAt(c);a<128||t?i(a):a<2048?(i(192|a>>>6),i(128|a&63)):a>55295&&a<57344?(a=65536+(a&1047552)|e.charCodeAt(++c)&1023,i(240|a>>>18),i(128|a>>>12&63),i(128|a>>>6&63),i(128|a&63)):(i(224|a>>>12),i(128|a>>>6&63),i(128|a&63))}return Bt(n,0,o)}function Mn(e,t){var r="";if(!t&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var n=0;n<e.length;){var o=e[n++];o<128||t?r+=String.fromCharCode(o):o<224?r+=String.fromCharCode((o&31)<<6|e[n++]&63):o<240?r+=String.fromCharCode((o&15)<<12|(e[n++]&63)<<6|e[n++]&63):(o=((o&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}return r}const Ht="v1";var ks=Object.defineProperty,Os=Object.defineProperties,Ds=Object.getOwnPropertyDescriptors,xn=Object.getOwnPropertySymbols,Rs=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,In=(e,t,r)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,As=(e,t)=>{for(var r in t||(t={}))Rs.call(t,r)&&In(e,r,t[r]);if(xn)for(var r of xn(t))Ls.call(t,r)&&In(e,r,t[r]);return e},Fs=(e,t)=>Os(e,Ds(t));const _s=e=>{const t=Fs(As({},e),{v:Ht});return Mn(xs(Tn(JSON.stringify(t))),!0)},Ps=e=>{if(typeof e!="string")return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch{}try{const t=JSON.parse(Mn(Is(Tn(e,!0))));if(t.v===Ht)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer ${Ht}.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};class Pe{constructor(t){this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}toString(){const t=this.lineNumber||"",r=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${t}:${r})`:`${this.fileName}:${t}:${r}`}}const $s=/(^|@)\S+:\d+/,kn=/^\s*at .*(\S+:\d+|\(native\))/m,Ws=/^(eval@)?(\[native code])?$/,On={parse:function(e){if(!e)return[];if(typeof e.stacktrace<"u"||typeof e["opera#sourceloc"]<"u")return this.parseOpera(e);if(e.stack&&e.stack.match(kn))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${e}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split(`
`).filter(function(t){return!!t.match(kn)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=n?r.replace(n[0],""):r;const o=r.split(/\s+/).slice(1),i=this.extractLocation(n?n[1]:o.pop()),c=o.join(" ")||void 0,l=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new Pe({functionName:c,fileName:l,lineNumber:i[1],columnNumber:i[2]})},this)},parseFFOrSafari:function(e){return e.stack.split(`
`).filter(function(t){return!t.match(Ws)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new Pe({functionName:t});{const r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(t.replace(r,""));return new Pe({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2]})}},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(`
`)>-1&&e.message.split(`
`).length>e.stacktrace.split(`
`).length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){const t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split(`
`),n=[];for(let o=2,i=r.length;o<i;o+=2){const c=t.exec(r[o]);c&&n.push(new Pe({fileName:c[2],lineNumber:parseFloat(c[1])}))}return n},parseOpera10:function(e){const t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split(`
`),n=[];for(let o=0,i=r.length;o<i;o+=2){const c=t.exec(r[o]);c&&n.push(new Pe({functionName:c[3]||void 0,fileName:c[2],lineNumber:parseFloat(c[1])}))}return n},parseOpera11:function(e){return e.stack.split(`
`).filter(function(t){return!!t.match($s)&&!t.match(/^Error created at/)},this).map(function(t){const r=t.split("@"),n=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Pe({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})},this)}};function js(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let r=e.localName;if(!r)break;r=r.toLowerCase();const n=e.parentElement,o=[];if(n.children&&n.children.length>0)for(let i=0;i<n.children.length;i++){const c=n.children[i];c.localName&&c.localName.toLowerCase&&c.localName.toLowerCase()===r&&o.push(c)}o.length>1&&(r+=`:eq(${o.indexOf(e)})`),t=r+(t?">"+t:""),e=n}return t}function Xt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dn(e,t){if(t===0)return!0;const r=Object.keys(e);for(const n of r)if(Xt(e[n])&&Dn(e[n],t-1))return!0;return!1}function Zt(e,t){const r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,t);const n=[],o=[];return JSON.stringify(e,function(l,a){if(n.length>0){const s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?o.splice(s,1/0,l):o.push(l),~n.indexOf(a)&&(n[0]===a?a="[Circular ~]":a="[Circular ~."+o.slice(0,n.indexOf(a)).join(".")+"]")}else n.push(a);if(a===null)return a;if(a===void 0)return"undefined";if(i(a))return c(a);if(a instanceof Event){const s={};for(const u in a){const d=a[u];Array.isArray(d)?s[u]=js(d.length?d[0]:null):s[u]=d}return s}else{if(a instanceof Node)return a instanceof HTMLElement?a?a.outerHTML:"":a.nodeName;if(a instanceof Error)return a.stack?a.stack+`
End of stack for Error object`:a.name+": "+a.message}return a});function i(l){return!!(Xt(l)&&Object.keys(l).length>r.numOfKeysLimit||typeof l=="function"||Xt(l)&&Dn(l,r.depthOfLimit))}function c(l){let a=l.toString();return r.stringLengthLimit&&a.length>r.stringLengthLimit&&(a=`${a.slice(0,r.stringLengthLimit)}...`),a}}const Rn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Us(e,t,r){const n=r?Object.assign({},Rn,r):Rn,o=n.logger;if(!o)return()=>{};let i;typeof o=="string"?i=t[o]:i=o;let c=0;const l=[];if(n.level.includes("error")&&window){const s=u=>{const d=u.message,p=u.error,h=On.parse(p).map(m=>m.toString()),f=[Zt(d,n.stringifyOptions)];e({level:"error",trace:h,payload:f})};window.addEventListener("error",s),l.push(()=>{window&&window.removeEventListener("error",s)})}for(const s of n.level)l.push(a(i,s));return()=>{l.forEach(s=>s())};function a(s,u){return s[u]?ye(s,u,d=>(...p)=>{d.apply(this,p);try{const h=On.parse(new Error).map(m=>m.toString()).splice(1),f=p.map(m=>Zt(m,n.stringifyOptions));c++,c<n.lengthThreshold?e({level:u,trace:h,payload:f}):c===n.lengthThreshold&&e({level:"warn",trace:[],payload:[Zt("The number of log records reached the threshold.")]})}catch(h){d("rrweb logger error:",h,...p)}}):()=>{}}}const Kt="rrweb/console@1",Vs=e=>({name:Kt,observer:Us,options:e}),ht="__rrweb_original__",Gs={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class Bs{constructor(t){this.config=Object.assign(Gs,t)}getConsoleLogger(){const t={};for(const r of this.config.level)r==="trace"?t[r]=n=>{(console.log[ht]?console.log[ht]:console.log)(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))}:t[r]=n=>{(console[r][ht]?console[r][ht]:console[r])(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))};return t}formatMessage(t){if(t.trace.length===0)return"";const r=`
	at `;let n=r;return n+=t.trace.join(r),n}}const zs=e=>{const t=e?.replayLogger||new Bs(e).getConsoleLogger();return{handler(r,n,o){let i=null;if(r.type===x.IncrementalSnapshot&&r.data.source===D.Log?i=r.data:r.type===x.Plugin&&r.data.plugin===Kt&&(i=r.data.payload),i)try{typeof t[i.level]=="function"&&t[i.level](i)}catch(c){o.replayer.config.showWarning&&console.warn(c)}}}};return Q.EventType=x,Q.IncrementalSource=D,Q.MouseInteractions=ee,Q.PLUGIN_NAME=Kt,Q.Replayer=us,Q.ReplayerEvents=B,Q.addCustomEvent=ds,Q.freezePage=hs,Q.getRecordConsolePlugin=Vs,Q.getReplayConsolePlugin=zs,Q.pack=_s,Q.record=Te,Q.unpack=Ps,Q.utils=vo,Object.defineProperty(Q,"__esModule",{value:!0}),Q}({});
//# sourceMappingURL=rrweb-all.min.js.map
