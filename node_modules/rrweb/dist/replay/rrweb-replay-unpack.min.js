var rrwebReplay=function(fe){"use strict";var I;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(I||(I={}));function Pt(e){return e.nodeType===e.ELEMENT_NODE}var Pe=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Ut(){return new Pe}var Ue=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function Bt(e,t){t===void 0&&(t={});var n=1,r=1;function o(v){var m=v.match(/\n/g);m&&(n+=m.length);var b=v.lastIndexOf(`
`);r=b===-1?r+v.length:v.length-b}function s(){var v={line:n,column:r};return function(m){return m.position=new l(v),E(),m}}var l=function(){function v(m){this.start=m,this.end={line:n,column:r},this.source=t.source}return v}();l.prototype.content=e;var u=[];function a(v){var m=new Error("".concat(t.source||"",":").concat(n,":").concat(r,": ").concat(v));if(m.reason=v,m.filename=t.source,m.line=n,m.column=r,m.source=e,t.silent)u.push(m);else throw m}function i(){var v=h();return{type:"stylesheet",stylesheet:{source:t.source,rules:v,parsingErrors:u}}}function c(){return f(/^{\s*/)}function d(){return f(/^}/)}function h(){var v,m=[];for(E(),g(m);e.length&&e.charAt(0)!=="}"&&(v=A()||ee());)v!==!1&&(m.push(v),g(m));return m}function f(v){var m=v.exec(e);if(m){var b=m[0];return o(b),e=e.slice(b.length),m}}function E(){f(/^\s*/)}function g(v){v===void 0&&(v=[]);for(var m;m=y();)m!==!1&&v.push(m),m=y();return v}function y(){var v=s();if(!(e.charAt(0)!=="/"||e.charAt(1)!=="*")){for(var m=2;e.charAt(m)!==""&&(e.charAt(m)!=="*"||e.charAt(m+1)!=="/");)++m;if(m+=2,e.charAt(m-1)==="")return a("End of comment missing");var b=e.slice(2,m-2);return r+=2,o(b),e=e.slice(m),r+=2,v({type:"comment",comment:b})}}function p(){var v=f(/^([^{]+)/);if(v)return z(v[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(m){return m.replace(/,/g,"\u200C")}).split(/\s*(?![^(]*\)),\s*/).map(function(m){return m.replace(/\u200C/g,",")})}function N(){var v=s(),m=f(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(m){var b=z(m[0]);if(!f(/^:\s*/))return a("property missing ':'");var M=f(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),F=v({type:"declaration",property:b.replace(Ue,""),value:M?z(M[0]).replace(Ue,""):""});return f(/^[;\s]*/),F}}function w(){var v=[];if(!c())return a("missing '{'");g(v);for(var m;m=N();)m!==!1&&(v.push(m),g(v)),m=N();return d()?v:a("missing '}'")}function O(){for(var v,m=[],b=s();v=f(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)m.push(v[1]),f(/^,\s*/);if(m.length)return b({type:"keyframe",values:m,declarations:w()})}function L(){var v=s(),m=f(/^@([-\w]+)?keyframes\s*/);if(m){var b=m[1];if(m=f(/^([-\w]+)\s*/),!m)return a("@keyframes missing name");var M=m[1];if(!c())return a("@keyframes missing '{'");for(var F,K=g();F=O();)K.push(F),K=K.concat(g());return d()?v({type:"keyframes",name:M,vendor:b,keyframes:K}):a("@keyframes missing '}'")}}function k(){var v=s(),m=f(/^@supports *([^{]+)/);if(m){var b=z(m[1]);if(!c())return a("@supports missing '{'");var M=g().concat(h());return d()?v({type:"supports",supports:b,rules:M}):a("@supports missing '}'")}}function $(){var v=s(),m=f(/^@host\s*/);if(m){if(!c())return a("@host missing '{'");var b=g().concat(h());return d()?v({type:"host",rules:b}):a("@host missing '}'")}}function _(){var v=s(),m=f(/^@media *([^{]+)/);if(m){var b=z(m[1]);if(!c())return a("@media missing '{'");var M=g().concat(h());return d()?v({type:"media",media:b,rules:M}):a("@media missing '}'")}}function Z(){var v=s(),m=f(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return v({type:"custom-media",name:z(m[1]),media:z(m[2])})}function me(){var v=s(),m=f(/^@page */);if(m){var b=p()||[];if(!c())return a("@page missing '{'");for(var M=g(),F;F=N();)M.push(F),M=M.concat(g());return d()?v({type:"page",selectors:b,declarations:M}):a("@page missing '}'")}}function pe(){var v=s(),m=f(/^@([-\w]+)?document *([^{]+)/);if(m){var b=z(m[1]),M=z(m[2]);if(!c())return a("@document missing '{'");var F=g().concat(h());return d()?v({type:"document",document:M,vendor:b,rules:F}):a("@document missing '}'")}}function q(){var v=s(),m=f(/^@font-face\s*/);if(m){if(!c())return a("@font-face missing '{'");for(var b=g(),M;M=N();)b.push(M),b=b.concat(g());return d()?v({type:"font-face",declarations:b}):a("@font-face missing '}'")}}var j=U("import"),J=U("charset"),se=U("namespace");function U(v){var m=new RegExp("^@"+v+"\\s*([^;]+);");return function(){var b=s(),M=f(m);if(M){var F={type:v};return F[v]=M[1].trim(),b(F)}}}function A(){if(e[0]==="@")return L()||_()||Z()||k()||j()||J()||se()||pe()||me()||$()||q()}function ee(){var v=s(),m=p();return m?(g(),v({type:"rule",selectors:m,declarations:w()})):a("selector missing")}return Ee(i())}function z(e){return e?e.replace(/^\s+|\s+$/g,""):""}function Ee(e,t){for(var n=e&&typeof e.type=="string",r=n?e:t,o=0,s=Object.keys(e);o<s.length;o++){var l=s[o],u=e[l];Array.isArray(u)?u.forEach(function(a){Ee(a,r)}):u&&typeof u=="object"&&Ee(u,r)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var Be={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function $t(e){var t=Be[e.tagName]?Be[e.tagName]:e.tagName;return t==="link"&&e.attributes._cssText&&(t="style"),t}function Wt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var $e=/([^\\]):hover/,Vt=new RegExp($e.source,"g");function We(e,t){var n=t?.stylesWithHoverClass.get(e);if(n)return n;var r=Bt(e,{silent:!0});if(!r.stylesheet)return e;var o=[];if(r.stylesheet.rules.forEach(function(u){"selectors"in u&&(u.selectors||[]).forEach(function(a){$e.test(a)&&o.push(a)})}),o.length===0)return e;var s=new RegExp(o.filter(function(u,a){return o.indexOf(u)===a}).sort(function(u,a){return a.length-u.length}).map(function(u){return Wt(u)}).join("|"),"g"),l=e.replace(s,function(u){var a=u.replace(Vt,"$1.\\:hover");return"".concat(u,", ").concat(a)});return t?.stylesWithHoverClass.set(e,l),l}function Ve(){var e=new Map;return{stylesWithHoverClass:e}}function Gt(e,t){var n=t.doc,r=t.hackCss,o=t.cache;switch(e.type){case I.Document:return n.implementation.createDocument(null,"",null);case I.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case I.Element:{var s=$t(e),l;e.isSVG?l=n.createElementNS("http://www.w3.org/2000/svg",s):l=n.createElement(s);var u=function(i){if(!Object.prototype.hasOwnProperty.call(e.attributes,i))return"continue";var c=e.attributes[i];if(s==="option"&&i==="selected"&&c===!1)return"continue";if(c=typeof c=="boolean"||typeof c=="number"?"":c,i.startsWith("rr_")){if(s==="canvas"&&i==="rr_dataURL"){var d=document.createElement("img");d.onload=function(){var w=l.getContext("2d");w&&w.drawImage(d,0,0,d.width,d.height)},d.src=c,l.RRNodeType&&(l.rr_dataURL=c)}else if(s==="img"&&i==="rr_dataURL"){var h=l;h.currentSrc.startsWith("data:")||(h.setAttribute("rrweb-original-src",e.attributes.src),h.src=c)}if(i==="rr_width")l.style.width=c;else if(i==="rr_height")l.style.height=c;else if(i==="rr_mediaCurrentTime")l.currentTime=e.attributes.rr_mediaCurrentTime;else if(i==="rr_mediaState")switch(c){case"played":l.play().catch(function(w){return console.warn("media playback error",w)});break;case"paused":l.pause();break}}else{var f=s==="textarea"&&i==="value",E=s==="style"&&i==="_cssText";if(E&&r&&(c=We(c,o)),f||E){for(var g=n.createTextNode(c),y=0,p=Array.from(l.childNodes);y<p.length;y++){var N=p[y];N.nodeType===l.TEXT_NODE&&l.removeChild(N)}return l.appendChild(g),"continue"}try{if(e.isSVG&&i==="xlink:href")l.setAttributeNS("http://www.w3.org/1999/xlink",i,c);else if(i==="onload"||i==="onclick"||i.substring(0,7)==="onmouse")l.setAttribute("_"+i,c);else{if(s==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&i==="content")return l.setAttribute("csp-content",c),"continue";s==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||s==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(s==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?l.setAttribute("rrweb-original-srcset",e.attributes.srcset):l.setAttribute(i,c))}}catch{}}};for(var a in e.attributes)u(a);if(e.isShadowHost)if(!l.shadowRoot)l.attachShadow({mode:"open"});else for(;l.shadowRoot.firstChild;)l.shadowRoot.removeChild(l.shadowRoot.firstChild);return l}case I.Text:return n.createTextNode(e.isStyle&&r?We(e.textContent,o):e.textContent);case I.CDATA:return n.createCDATASection(e.textContent);case I.Comment:return n.createComment(e.textContent);default:return null}}function ge(e,t){var n=t.doc,r=t.mirror,o=t.skipChild,s=o===void 0?!1:o,l=t.hackCss,u=l===void 0?!0:l,a=t.afterAppend,i=t.cache,c=Gt(e,{doc:n,hackCss:u,cache:i});if(!c)return null;if(e.rootId&&console.assert(r.getNode(e.rootId)===n,"Target document should have the same root id."),e.type===I.Document&&(n.close(),n.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==I.DocumentType&&(e.childNodes[0].type===I.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),c=n),r.add(c,e),(e.type===I.Document||e.type===I.Element)&&!s)for(var d=0,h=e.childNodes;d<h.length;d++){var f=h[d],E=ge(f,{doc:n,mirror:r,skipChild:!1,hackCss:u,afterAppend:a,cache:i});if(!E){console.warn("Failed to rebuild",f);continue}f.isShadow&&Pt(c)&&c.shadowRoot?c.shadowRoot.appendChild(E):c.appendChild(E),a&&a(E)}return c}function jt(e,t){function n(l){t(l)}for(var r=0,o=e.getIds();r<o.length;r++){var s=o[r];e.has(s)&&n(e.getNode(s))}}function Yt(e,t){var n=t.getMeta(e);if(n?.type===I.Element){var r=e;for(var o in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,o)&&o.startsWith("rr_")){var s=n.attributes[o];o==="rr_scrollLeft"&&(r.scrollLeft=s),o==="rr_scrollTop"&&(r.scrollTop=s)}}}function zt(e,t){var n=t.doc,r=t.onVisit,o=t.hackCss,s=o===void 0?!0:o,l=t.afterAppend,u=t.cache,a=t.mirror,i=a===void 0?new Pe:a,c=ge(e,{doc:n,mirror:i,skipChild:!1,hackCss:s,afterAppend:l,cache:u});return jt(i,function(d){r&&r(d),Yt(d,i)}),c}var T;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(T||(T={}));var Ht=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Xt(){return new Ht}function Qt(e){const t={},n=/;(?![^(]*\))/g,r=/:(.+)/,o=/\/\*.*?\*\//g;return e.replace(o,"").split(n).forEach(function(s){if(s){const l=s.split(r);l.length>1&&(t[we(l[0].trim())]=l[1].trim())}}),t}function Ge(e){const t=[];for(const n in e){const r=e[n];if(typeof r!="string")continue;const o=Zt(n);t.push(`${o}: ${r};`)}return t.join(" ")}const qt=/-([a-z])/g,Jt=/^--[a-zA-Z0-9-]+$/,we=e=>Jt.test(e)?e:e.replace(qt,(t,n)=>n?n.toUpperCase():""),Kt=/\B([A-Z])/g,Zt=e=>e.replace(Kt,"-$1").toLowerCase();class W{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=S.ELEMENT_NODE,this.TEXT_NODE=S.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const n=t.childNodes,r=n.indexOf(this);return n[r+1]||null}contains(t){if(t===this)return!0;for(const n of this.childNodes)if(n.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function en(e){return class Ft extends e{constructor(){super(...arguments),this.nodeType=S.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=T.Document,this.textContent=null}get documentElement(){return this.childNodes.find(n=>n.RRNodeType===T.Element&&n.tagName==="HTML")||null}get body(){var n;return((n=this.documentElement)===null||n===void 0?void 0:n.childNodes.find(r=>r.RRNodeType===T.Element&&r.tagName==="BODY"))||null}get head(){var n;return((n=this.documentElement)===null||n===void 0?void 0:n.childNodes.find(r=>r.RRNodeType===T.Element&&r.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(n){const r=n.RRNodeType;if((r===T.Element||r===T.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${r===T.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return n.parentElement=null,n.parentNode=this,this.childNodes.push(n),n}insertBefore(n,r){const o=n.RRNodeType;if((o===T.Element||o===T.DocumentType)&&this.childNodes.some(l=>l.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===T.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(r===null)return this.appendChild(n);const s=this.childNodes.indexOf(r);if(s==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(s,0,n),n.parentElement=null,n.parentNode=this,n}removeChild(n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),n.parentElement=null,n.parentNode=null,n}open(){this.childNodes=[]}close(){}write(n){let r;if(n==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?r="-//W3C//DTD XHTML 1.0 Transitional//EN":n==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(r="-//W3C//DTD HTML 4.0 Transitional//EN"),r){const o=this.createDocumentType("html",r,"");this.open(),this.appendChild(o)}}createDocument(n,r,o){return new Ft}createDocumentType(n,r,o){const s=new(je(W))(n,r,o);return s.ownerDocument=this,s}createElement(n){const r=new(Ye(W))(n);return r.ownerDocument=this,r}createElementNS(n,r){return this.createElement(r)}createTextNode(n){const r=new(ze(W))(n);return r.ownerDocument=this,r}createComment(n){const r=new(He(W))(n);return r.ownerDocument=this,r}createCDATASection(n){const r=new(Xe(W))(n);return r.ownerDocument=this,r}toString(){return"RRDocument"}}}function je(e){return class extends e{constructor(t,n,r){super(),this.nodeType=S.DOCUMENT_TYPE_NODE,this.RRNodeType=T.DocumentType,this.textContent=null,this.name=t,this.publicId=n,this.systemId=r,this.nodeName=t}toString(){return"RRDocumentType"}}}function Ye(e){return class extends e{constructor(t){super(),this.nodeType=S.ELEMENT_NODE,this.RRNodeType=T.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(n=>t+=n.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new nn(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?Qt(this.attributes.style):{},n=/\B([A-Z])/g;return t.setProperty=(r,o,s)=>{if(n.test(r))return;const l=we(r);o?t[l]=o:delete t[l],s==="important"&&(t[l]+=" !important"),this.attributes.style=Ge(t)},t.removeProperty=r=>{if(n.test(r))return"";const o=we(r),s=t[o]||"";return delete t[o],this.attributes.style=Ge(t),s},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,n){this.attributes[t]=n}setAttributeNS(t,n,r){this.setAttribute(n,r)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,n){if(n===null)return this.appendChild(t);const r=this.childNodes.indexOf(n);if(r==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(r,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const n=this.childNodes.indexOf(t);if(n===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(n,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const n=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=n,n}dispatchEvent(t){return!0}toString(){let t="";for(const n in this.attributes)t+=`${n}="${this.attributes[n]}" `;return`${this.tagName} ${t}`}}}function tn(e){return class extends e{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function ze(e){return class extends e{constructor(t){super(),this.nodeType=S.TEXT_NODE,this.nodeName="#text",this.RRNodeType=T.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function He(e){return class extends e{constructor(t){super(),this.nodeType=S.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=T.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Xe(e){return class extends e{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=S.CDATA_SECTION_NODE,this.RRNodeType=T.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class nn{constructor(t,n){if(this.classes=[],this.add=(...r)=>{for(const o of r){const s=String(o);this.classes.indexOf(s)>=0||this.classes.push(s)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...r)=>{this.classes=this.classes.filter(o=>r.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},t){const r=t.trim().split(/\s+/);this.classes.push(...r)}this.onChange=n}}var S;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(S||(S={}));const Te={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},rn={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Y(e,t,n,r){const o=e.childNodes,s=t.childNodes;r=r||t.mirror||t.ownerDocument.mirror,(o.length>0||s.length>0)&&Qe(Array.from(o),s,e,n,r);let l=null,u=null;switch(t.RRNodeType){case T.Document:{u=t.scrollData;break}case T.Element:{const a=e,i=t;switch(on(a,i,r),u=i.scrollData,l=i.inputData,i.tagName){case"AUDIO":case"VIDEO":{const c=e,d=i;d.paused!==void 0&&(d.paused?c.pause():c.play()),d.muted!==void 0&&(c.muted=d.muted),d.volume!==void 0&&(c.volume=d.volume),d.currentTime!==void 0&&(c.currentTime=d.currentTime);break}case"CANVAS":{const c=t;if(c.rr_dataURL!==null){const d=document.createElement("img");d.onload=()=>{const h=a.getContext("2d");h&&h.drawImage(d,0,0,d.width,d.height)},d.src=c.rr_dataURL}c.canvasMutations.forEach(d=>n.applyCanvas(d.event,d.mutation,e))}break;case"STYLE":sn(a,t.rules);break}if(i.shadowRoot){a.shadowRoot||a.attachShadow({mode:"open"});const c=a.shadowRoot.childNodes,d=i.shadowRoot.childNodes;(c.length>0||d.length>0)&&Qe(Array.from(c),d,a.shadowRoot,n,r)}break}case T.Text:case T.Comment:case T.CDATA:e.textContent!==t.data&&(e.textContent=t.data);break}if(u&&n.applyScroll(u,!0),l&&n.applyInput(l),t.nodeName==="IFRAME"){const a=e.contentDocument,i=t;if(a){const c=r.getMeta(i.contentDocument);c&&n.mirror.add(a,Object.assign({},c)),Y(a,i.contentDocument,n,r)}}}function on(e,t,n){const r=e.attributes,o=t.attributes;for(const s in o){const l=o[s],u=n.getMeta(t);if(u&&"isSVG"in u&&u.isSVG&&Te[s])e.setAttributeNS(Te[s],s,l);else if(t.tagName==="CANVAS"&&s==="rr_dataURL"){const a=document.createElement("img");a.src=l,a.onload=()=>{const i=e.getContext("2d");i&&i.drawImage(a,0,0,a.width,a.height)}}else e.setAttribute(s,l)}for(const{name:s}of Array.from(r))s in o||e.removeAttribute(s);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}function Qe(e,t,n,r,o){var s;let l=0,u=e.length-1,a=0,i=t.length-1,c=e[l],d=e[u],h=t[a],f=t[i],E,g;for(;l<=u&&a<=i;)if(c===void 0)c=e[++l];else if(d===void 0)d=e[--u];else if(r.mirror.getId(c)===o.getId(h))Y(c,h,r,o),c=e[++l],h=t[++a];else if(r.mirror.getId(d)===o.getId(f))Y(d,f,r,o),d=e[--u],f=t[--i];else if(r.mirror.getId(c)===o.getId(f))n.insertBefore(c,d.nextSibling),Y(c,f,r,o),c=e[++l],f=t[--i];else if(r.mirror.getId(d)===o.getId(h))n.insertBefore(d,c),Y(d,h,r,o),d=e[--u],h=t[++a];else{if(!E){E={};for(let y=l;y<=u;y++){const p=e[y];p&&r.mirror.hasNode(p)&&(E[r.mirror.getId(p)]=y)}}if(g=E[o.getId(h)],g){const y=e[g];n.insertBefore(y,c),Y(y,h,r,o),e[g]=void 0}else{const y=be(h,r.mirror,o);n.nodeName==="#document"&&((s=r.mirror.getMeta(y))===null||s===void 0?void 0:s.type)===T.Element&&n.documentElement&&(n.removeChild(n.documentElement),e[l]=void 0,c=void 0),n.insertBefore(y,c||null),Y(y,h,r,o)}h=t[++a]}if(l>u){const y=t[i+1];let p=null;for(y&&n.childNodes.forEach(N=>{r.mirror.getId(N)===o.getId(y)&&(p=N)});a<=i;++a){const N=be(t[a],r.mirror,o);n.insertBefore(N,p),Y(N,t[a],r,o)}}else if(a>i)for(;l<=u;l++){const y=e[l];y&&(n.removeChild(y),r.mirror.removeNodeFromMap(y))}}function be(e,t,n){let r=t.getNode(n.getId(e));const o=n.getMeta(e);if(r!==null)return r;switch(e.RRNodeType){case T.Document:r=new Document;break;case T.DocumentType:r=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case T.Element:{let s=e.tagName.toLowerCase();s=rn[s]||s,o&&"isSVG"in o&&o?.isSVG?r=document.createElementNS(Te.svg,s):r=document.createElement(e.tagName);break}case T.Text:r=document.createTextNode(e.data);break;case T.Comment:r=document.createComment(e.data);break;case T.CDATA:r=document.createCDATASection(e.data);break}return o&&t.add(r,Object.assign({},o)),r}function ae(e,t){const n=e[t[0]];return t.length===1?n:ae(n.cssRules[t[1]].cssRules,t.slice(2))}var V;(function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"})(V||(V={}));function qe(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function sn(e,t){const n=e.sheet;t.forEach(r=>{if(r.type===V.Insert)try{if(Array.isArray(r.index)){const{positions:o,index:s}=qe(r.index);ae(n.cssRules,o).insertRule(r.cssText,s)}else n.insertRule(r.cssText,r.index)}catch{}else if(r.type===V.Remove)try{if(Array.isArray(r.index)){const{positions:o,index:s}=qe(r.index);ae(n.cssRules,o).deleteRule(s||0)}else n.deleteRule(r.index)}catch{}else r.type===V.SetProperty?ae(n.cssRules,r.index).style.setProperty(r.property,r.value,r.priority):r.type===V.RemoveProperty&&ae(n.cssRules,r.index).style.removeProperty(r.property)})}class te extends en(W){constructor(t){super(),this._unserializedId=-1,this.mirror=vn(),this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,n,r){return new te}createDocumentType(t,n,r){const o=new an(t,n,r);return o.ownerDocument=this,o}createElement(t){const n=t.toUpperCase();let r;switch(n){case"AUDIO":case"VIDEO":r=new ln(n);break;case"IFRAME":r=new dn(n,this.mirror);break;case"CANVAS":r=new cn(n);break;case"STYLE":r=new un(n);break;default:r=new le(n);break}return r.ownerDocument=this,r}createComment(t){const n=new mn(t);return n.ownerDocument=this,n}createCDATASection(t){const n=new pn(t);return n.ownerDocument=this,n}createTextNode(t){const n=new hn(t);return n.ownerDocument=this,n}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=-1}}const an=je(W);class le extends Ye(W){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class ln extends tn(le){}class cn extends le{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class un extends le{constructor(){super(...arguments),this.rules=[]}}class dn extends le{constructor(t,n){super(t),this.contentDocument=new te,this.contentDocument.mirror=n}}const hn=ze(W),mn=He(W),pn=Xe(W);function fn(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}function Je(e,t,n,r){let o;switch(e.nodeType){case S.DOCUMENT_NODE:r&&r.nodeName==="IFRAME"?o=r.contentDocument:(o=t,o.compatMode=e.compatMode);break;case S.DOCUMENT_TYPE_NODE:{const l=e;o=t.createDocumentType(l.name,l.publicId,l.systemId);break}case S.ELEMENT_NODE:{const l=e,u=fn(l);o=t.createElement(u);const a=o;for(const{name:i,value:c}of Array.from(l.attributes))a.attributes[i]=c;l.scrollLeft&&(a.scrollLeft=l.scrollLeft),l.scrollTop&&(a.scrollTop=l.scrollTop);break}case S.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case S.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case S.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case S.DOCUMENT_FRAGMENT_NODE:o=r.attachShadow({mode:"open"});break;default:return null}let s=n.getMeta(e);return t instanceof te&&(s||(s=Ke(o,t.unserializedId),n.add(e,s)),t.mirror.add(o,Object.assign({},s))),o}function gn(e,t=Xt(),n=new te){function r(o,s){const l=Je(o,n,t,s);l!==null&&(s?.nodeName!=="IFRAME"&&o.nodeType!==S.DOCUMENT_FRAGMENT_NODE&&(s?.appendChild(l),l.parentNode=s,l.parentElement=s),o.nodeName==="IFRAME"?r(o.contentDocument,l):(o.nodeType===S.DOCUMENT_NODE||o.nodeType===S.ELEMENT_NODE||o.nodeType===S.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===S.ELEMENT_NODE&&o.shadowRoot&&r(o.shadowRoot,l),o.childNodes.forEach(u=>r(u,l))))}return r(e,null),n}function vn(){return new yn}class yn{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ke(e,t){switch(e.RRNodeType){case T.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case T.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case T.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case T.Text:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case T.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case T.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}function Ze(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}var Nn=Object.freeze({__proto__:null,default:Ze});function En(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;const n=e.HTMLElement||e.Element,r=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||a,scrollIntoView:n.prototype.scrollIntoView},s=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;function l(p){const N=["MSIE ","Trident/","Edge/"];return new RegExp(N.join("|")).test(p)}const u=l(e.navigator.userAgent)?1:0;function a(p,N){this.scrollLeft=p,this.scrollTop=N}function i(p){return .5*(1-Math.cos(Math.PI*p))}function c(p){if(p===null||typeof p!="object"||p.behavior===void 0||p.behavior==="auto"||p.behavior==="instant")return!0;if(typeof p=="object"&&p.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+p.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(p,N){if(N==="Y")return p.clientHeight+u<p.scrollHeight;if(N==="X")return p.clientWidth+u<p.scrollWidth}function h(p,N){const w=e.getComputedStyle(p,null)["overflow"+N];return w==="auto"||w==="scroll"}function f(p){const N=d(p,"Y")&&h(p,"Y"),w=d(p,"X")&&h(p,"X");return N||w}function E(p){for(;p!==t.body&&f(p)===!1;)p=p.parentNode||p.host;return p}function g(p){const N=s();let w,O,L,k=(N-p.startTime)/r;k=k>1?1:k,w=i(k),O=p.startX+(p.x-p.startX)*w,L=p.startY+(p.y-p.startY)*w,p.method.call(p.scrollable,O,L),(O!==p.x||L!==p.y)&&e.requestAnimationFrame(g.bind(e,p))}function y(p,N,w){let O,L,k,$;const _=s();p===t.body?(O=e,L=e.scrollX||e.pageXOffset,k=e.scrollY||e.pageYOffset,$=o.scroll):(O=p,L=p.scrollLeft,k=p.scrollTop,$=a),g({scrollable:O,method:$,startTime:_,startX:L,startY:k,x:N,y:w})}e.scroll=e.scrollTo=function(){if(arguments[0]!==void 0){if(c(arguments[0])===!0){o.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset);return}y.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset)}},e.scrollBy=function(){if(arguments[0]!==void 0){if(c(arguments[0])){o.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}y.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))}},n.prototype.scroll=n.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(c(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const p=arguments[0].left,N=arguments[0].top;y.call(this,this,typeof p>"u"?this.scrollLeft:~~p,typeof N>"u"?this.scrollTop:~~N)},n.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(c(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},n.prototype.scrollIntoView=function(){if(c(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const p=E(this),N=p.getBoundingClientRect(),w=this.getBoundingClientRect();p!==t.body?(y.call(this,p,p.scrollLeft+w.left-N.left,p.scrollTop+w.top-N.top),e.getComputedStyle(p).position!=="fixed"&&e.scrollBy({left:N.left,top:N.top,behavior:"smooth"})):e.scrollBy({left:w.left,top:w.top,behavior:"smooth"})}}var x=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(x||{}),R=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e))(R||{}),P=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(P||{}),ve=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ve||{}),De=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e))(De||{}),D=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e))(D||{});class wn{constructor(t=[],n){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=n}addAction(t){const n=this.findActionIndex(t);this.actions.splice(n,0,t)}addActions(t){this.actions=this.actions.concat(t)}start(){this.timeOffset=0;let t=performance.now();const{actions:n}=this,r=()=>{const o=performance.now();for(this.timeOffset+=(o-t)*this.speed,t=o;n.length;){const s=n[0];if(this.timeOffset>=s.delay)n.shift(),s.doAction();else break}(n.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(r))};this.raf=requestAnimationFrame(r)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return this.raf!==null}findActionIndex(t){let n=0,r=this.actions.length-1;for(;n<=r;){const o=Math.floor((n+r)/2);if(this.actions[o].delay<t.delay)n=o+1;else if(this.actions[o].delay>t.delay)r=o-1;else return o+1}return n}}function et(e,t){if(e.type===x.IncrementalSnapshot&&e.data.source===R.MouseMove){const n=e.data.positions[0].timeOffset,r=e.timestamp+n;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function tt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),l=[];try{for(;(t===void 0||t-- >0)&&!(r=s.next()).done;)l.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return l}var ne;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ne||(ne={}));var nt={type:"xstate.init"};function Me(e){return e===void 0?[]:[].concat(e)}function re(e){return{type:"xstate.assign",assignment:e}}function rt(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function ye(e){return function(t){return e===t}}function ot(e){return typeof e=="string"?{type:e}:e}function it(e,t){return{value:e,context:t,actions:[],changed:!1,matches:ye(e)}}function st(e,t,n){var r=t,o=!1;return[e.filter(function(s){if(s.type==="xstate.assign"){o=!0;var l=Object.assign({},r);return typeof s.assignment=="function"?l=s.assignment(r,n):Object.keys(s.assignment).forEach(function(u){l[u]=typeof s.assignment[u]=="function"?s.assignment[u](r,n):s.assignment[u]}),r=l,!1}return!0}),r,o]}function at(e,t){t===void 0&&(t={});var n=tt(st(Me(e.states[e.initial].entry).map(function(l){return rt(l,t.actions)}),e.context,nt),2),r=n[0],o=n[1],s={config:e,_options:t,initialState:{value:e.initial,actions:r,context:o,matches:ye(e.initial)},transition:function(l,u){var a,i,c=typeof l=="string"?{value:l,context:e.context}:l,d=c.value,h=c.context,f=ot(u),E=e.states[d];if(E.on){var g=Me(E.on[f.type]);try{for(var y=function(A){var ee=typeof Symbol=="function"&&Symbol.iterator,v=ee&&A[ee],m=0;if(v)return v.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&m>=A.length&&(A=void 0),{value:A&&A[m++],done:!A}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),p=y.next();!p.done;p=y.next()){var N=p.value;if(N===void 0)return it(d,h);var w=typeof N=="string"?{target:N}:N,O=w.target,L=w.actions,k=L===void 0?[]:L,$=w.cond,_=$===void 0?function(){return!0}:$,Z=O===void 0,me=O??d,pe=e.states[me];if(_(h,f)){var q=tt(st((Z?Me(k):[].concat(E.exit,k,pe.entry).filter(function(A){return A})).map(function(A){return rt(A,s._options.actions)}),h,f),3),j=q[0],J=q[1],se=q[2],U=O??d;return{value:U,context:J,actions:j,changed:O!==d||j.length>0||se,matches:ye(U)}}}}catch(A){a={error:A}}finally{try{p&&!p.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}}return it(d,h)}};return s}var lt=function(e,t){return e.actions.forEach(function(n){var r=n.exec;return r&&r(e.context,t)})};function ct(e){var t=e.initialState,n=ne.NotStarted,r=new Set,o={_machine:e,send:function(s){n===ne.Running&&(t=e.transition(t,s),lt(t,ot(s)),r.forEach(function(l){return l(t)}))},subscribe:function(s){return r.add(s),s(t),{unsubscribe:function(){return r.delete(s)}}},start:function(s){if(s){var l=typeof s=="object"?s:{context:e.config.context,value:s};t={value:l.value,actions:[],context:l.context,matches:ye(l.value)}}return n=ne.Running,lt(t,nt),o},stop:function(){return n=ne.Stopped,r.clear(),o},get state(){return t},get status(){return n}};return o}var Tn=Object.defineProperty,bn=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,dt=(e,t,n)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ce=(e,t)=>{for(var n in t||(t={}))Mn.call(t,n)&&dt(e,n,t[n]);if(ut)for(var n of ut(t))Cn.call(t,n)&&dt(e,n,t[n]);return e},xe=(e,t)=>bn(e,Dn(t));function xn(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.type===x.Meta&&r.timestamp<=t)return e.slice(n)}return e}function Sn(e,{getCastFn:t,applyEventsSynchronously:n,emitter:r}){const o=at({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:re({lastPlayedEvent:(s,l)=>l.type==="CAST_EVENT"?l.payload.event:s.lastPlayedEvent}),recordTimeOffset:re((s,l)=>{let u=s.timeOffset;return"payload"in l&&"timeOffset"in l.payload&&(u=l.payload.timeOffset),xe(Ce({},s),{timeOffset:u,baselineTime:s.events[0].timestamp+u})}),play(s){var l;const{timer:u,events:a,baselineTime:i,lastPlayedEvent:c}=s;u.clear();for(const g of a)et(g,i);const d=xn(a,i);let h=c?.timestamp;c?.type===x.IncrementalSnapshot&&c.data.source===R.MouseMove&&(h=c.timestamp+((l=c.data.positions[0])==null?void 0:l.timeOffset)),i<(h||0)&&r.emit(D.PlayBack);const f=new Array,E=new Array;for(const g of d)if(!(h&&h<i&&(g.timestamp<=h||g===c)))if(g.timestamp<i)f.push(g);else{const y=t(g,!1);E.push({doAction:()=>{y()},delay:g.delay})}n(f),r.emit(D.Flush),u.addActions(E),u.start()},pause(s){s.timer.clear()},resetLastPlayedEvent:re(s=>xe(Ce({},s),{lastPlayedEvent:null})),startLive:re({baselineTime:(s,l)=>(s.timer.toggleLiveMode(!0),s.timer.start(),l.type==="TO_LIVE"&&l.payload.baselineTime?l.payload.baselineTime:Date.now())}),addEvent:re((s,l)=>{const{baselineTime:u,timer:a,events:i}=s;if(l.type==="ADD_EVENT"){const{event:c}=l.payload;et(c,u);let d=i.length-1;if(!i[d]||i[d].timestamp<=c.timestamp)i.push(c);else{let E=-1,g=0;for(;g<=d;){const y=Math.floor((g+d)/2);i[y].timestamp<=c.timestamp?g=y+1:d=y-1}E===-1&&(E=g),i.splice(E,0,c)}const h=c.timestamp<u,f=t(c,h);h?f():a.isActive()&&a.addAction({doAction:()=>{f()},delay:c.delay})}return xe(Ce({},s),{events:i})})}});return ct(o)}function Rn(e){const t=at({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(n,r)=>{"payload"in r&&n.timer.setSpeed(r.payload.speed)},recordSpeed:re({normalSpeed:n=>n.timer.speed}),restoreSpeed:n=>{n.timer.setSpeed(n.normalSpeed)}}});return ct(t)}const oe=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ht={map:{},getId(){return console.error(oe),-1},getNode(){return console.error(oe),null},removeNodeFromMap(){console.error(oe)},has(){return console.error(oe),!1},reset(){console.error(oe)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ht=new Proxy(ht,{get(e,t,n){return t==="map"&&console.error(oe),Reflect.get(e,t,n)}}));function An(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function In(e){const t={},n=(o,s)=>{const l={value:o,parent:s,children:[]};return t[o.node.id]=l,l},r=[];for(const o of e){const{nextId:s,parentId:l}=o;if(s&&s in t){const u=t[s];if(u.parent){const a=u.parent.children.indexOf(u);u.parent.children.splice(a,0,n(o,u.parent))}else{const a=r.indexOf(u);r.splice(a,0,n(o,null))}continue}if(l in t){const u=t[l];u.children.push(n(o,u));continue}r.push(n(o,null))}return r}function mt(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)mt(e.children[n],t)}function Se(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function pt(e,t){var n,r;const o=(r=(n=e.ownerDocument)==null?void 0:n.defaultView)==null?void 0:r.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=o.getBoundingClientRect(),l=pt(o,t),u=s.height/o.clientHeight;return{x:s.x*l.relativeScale+l.x,y:s.y*l.relativeScale+l.y,relativeScale:u,absoluteScale:l.absoluteScale*u}}function ft(e){return Boolean(e?.shadowRoot)}function ce(e,t){const n=e[t[0]];return t.length===1?n:ce(n.cssRules[t[1]].cssRules,t.slice(2))}function gt(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function On(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}const kn=e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"];for(var vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ne=0;Ne<vt.length;Ne++)ue[vt.charCodeAt(Ne)]=Ne;var _n=function(e){var t=e.length*.75,n=e.length,r,o=0,s,l,u,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var i=new ArrayBuffer(t),c=new Uint8Array(i);for(r=0;r<n;r+=4)s=ue[e.charCodeAt(r)],l=ue[e.charCodeAt(r+1)],u=ue[e.charCodeAt(r+2)],a=ue[e.charCodeAt(r+3)],c[o++]=s<<2|l>>4,c[o++]=(l&15)<<4|u>>2,c[o++]=(u&3)<<6|a&63;return i},Ln=(e,t,n)=>new Promise((r,o)=>{var s=a=>{try{u(n.next(a))}catch(i){o(i)}},l=a=>{try{u(n.throw(a))}catch(i){o(i)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);u((n=n.apply(e,t)).next())});const yt=new Map;function Nt(e,t){let n=yt.get(e);return n||(n=new Map,yt.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function H(e,t,n){return r=>Ln(this,null,function*(){if(r&&typeof r=="object"&&"rr_type"in r)if(n&&(n.isUnchanged=!1),r.rr_type==="ImageBitmap"&&"args"in r){const o=yield H(e,t,n)(r.args);return yield createImageBitmap.apply(null,o)}else if("index"in r){if(n||t===null)return r;const{rr_type:o,index:s}=r;return Nt(t,o)[s]}else if("args"in r){const{rr_type:o,args:s}=r,l=window[o];return new l(...yield Promise.all(s.map(H(e,t,n))))}else{if("base64"in r)return _n(r.base64);if("src"in r){const o=e.get(r.src);if(o)return o;{const s=new Image;return s.src=r.src,e.set(r.src,s),s}}else if("data"in r&&r.rr_type==="Blob"){const o=yield Promise.all(r.data.map(H(e,t,n)));return new Blob(o,{type:r.type})}}else if(Array.isArray(r))return yield Promise.all(r.map(H(e,t,n)));return r})}var Fn=(e,t,n)=>new Promise((r,o)=>{var s=a=>{try{u(n.next(a))}catch(i){o(i)}},l=a=>{try{u(n.throw(a))}catch(i){o(i)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);u((n=n.apply(e,t)).next())});function Pn(e,t){try{return t===ve.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch{return null}}const Un=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Bn(e,t){if(!(t!=null&&t.constructor))return;const{name:n}=t.constructor;if(!Un.includes(n))return;const r=Nt(e,n);r.includes(t)||r.push(t)}function $n(e){return Fn(this,arguments,function*({mutation:t,target:n,type:r,imageMap:o,errorHandler:s}){try{const l=Pn(n,r);if(!l)return;if(t.setter){l[t.property]=t.args[0];return}const u=l[t.property],a=yield Promise.all(t.args.map(H(o,l))),i=u.apply(l,a);Bn(l,i)}catch(l){s(t,l)}})}var Wn=(e,t,n)=>new Promise((r,o)=>{var s=a=>{try{u(n.next(a))}catch(i){o(i)}},l=a=>{try{u(n.throw(a))}catch(i){o(i)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);u((n=n.apply(e,t)).next())});function Vn(e){return Wn(this,arguments,function*({event:t,mutation:n,target:r,imageMap:o,errorHandler:s}){try{const l=r.getContext("2d");if(n.setter){l[n.property]=n.args[0];return}const u=l[n.property];if(n.property==="drawImage"&&typeof n.args[0]=="string")o.get(t),u.apply(l,n.args);else{const a=yield Promise.all(n.args.map(H(o,l)));u.apply(l,a)}}catch(l){s(n,l)}})}var Gn=(e,t,n)=>new Promise((r,o)=>{var s=a=>{try{u(n.next(a))}catch(i){o(i)}},l=a=>{try{u(n.throw(a))}catch(i){o(i)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);u((n=n.apply(e,t)).next())});function Et(e){return Gn(this,arguments,function*({event:t,mutation:n,target:r,imageMap:o,canvasEventMap:s,errorHandler:l}){try{const u=s.get(t)||n,a="commands"in u?u.commands:[u];if([ve.WebGL,ve.WebGL2].includes(n.type)){for(let i=0;i<a.length;i++){const c=a[i];yield $n({mutation:c,type:n.type,target:r,imageMap:o,errorHandler:l})}return}for(let i=0;i<a.length;i++){const c=a[i];yield Vn({event:t,mutation:c,target:r,imageMap:o,errorHandler:l})}}catch(u){l(n,u)}})}var jn=Object.defineProperty,Yn=Object.defineProperties,zn=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,Tt=(e,t,n)=>t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ie=(e,t)=>{for(var n in t||(t={}))Hn.call(t,n)&&Tt(e,n,t[n]);if(wt)for(var n of wt(t))Xn.call(t,n)&&Tt(e,n,t[n]);return e},Re=(e,t)=>Yn(e,zn(t)),Ae=(e,t,n)=>new Promise((r,o)=>{var s=a=>{try{u(n.next(a))}catch(i){o(i)}},l=a=>{try{u(n.throw(a))}catch(i){o(i)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);u((n=n.apply(e,t)).next())});const Qn=10*1e3,qn=5*1e3,Jn=Ze||Nn,Ie="[replayer]",Oe={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function bt(e){return e.type==x.IncrementalSnapshot&&(e.data.source==R.TouchMove||e.data.source==R.MouseInteraction&&e.data.type==P.TouchStart)}class Kn{constructor(t,n){if(this.usingVirtualDom=!1,this.virtualDom=new te,this.mouseTail=null,this.tailPositions=[],this.emitter=Jn(),this.legacy_missingNodeRetryMap={},this.cache=Ve(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Ut(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.handleResize=u=>{this.iframe.style.display="inherit";for(const a of[this.mouseTail,this.iframe])!a||(a.setAttribute("width",String(u.width)),a.setAttribute("height",String(u.height)))},this.applyEventsSynchronously=u=>{for(const a of u){switch(a.type){case x.DomContentLoaded:case x.Load:case x.Custom:continue;case x.FullSnapshot:case x.Meta:case x.Plugin:case x.IncrementalSnapshot:break}this.getCastFn(a,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(u,a=!1)=>{let i;switch(u.type){case x.DomContentLoaded:case x.Load:break;case x.Custom:i=()=>{this.emitter.emit(D.CustomEvent,u)};break;case x.Meta:i=()=>this.emitter.emit(D.Resize,{width:u.data.width,height:u.data.height});break;case x.FullSnapshot:i=()=>{if(this.firstFullSnapshot){if(this.firstFullSnapshot===u){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(u,a),this.iframe.contentWindow.scrollTo(u.data.initialOffset)};break;case x.IncrementalSnapshot:i=()=>{if(this.applyIncremental(u,a),!a&&(u===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const c of this.service.state.context.events)if(!(c.timestamp<=u.timestamp)&&this.isUserInteraction(c)){c.delay-u.delay>Qn*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=c);break}if(this.nextUserInteractionEvent){const c=this.nextUserInteractionEvent.delay-u.delay,d={speed:Math.min(Math.round(c/qn),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(D.SkipStart,d)}}};break}return()=>{i&&i();for(const d of this.config.plugins||[])d.handler(u,a,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:u}});const c=this.service.state.context.events.length-1;if(u===this.service.state.context.events[c]){const d=()=>{c<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(D.Finish))};u.type===x.IncrementalSnapshot&&u.data.source===R.MouseMove&&u.data.positions.length?setTimeout(()=>{d()},Math.max(0,-u.data.positions[0].timeOffset+50)):d()}this.emitter.emit(D.EventCast,u)}},!(n!=null&&n.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Oe,useVirtualDom:!0};this.config=Object.assign({},r,n),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(D.Resize,this.handleResize),this.setupDom(),this.emitter.on(D.Flush,()=>{if(this.usingVirtualDom){const u={mirror:this.mirror,applyCanvas:(a,i,c)=>{Et({event:a,mutation:i,target:c,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this)};if(Y(this.iframe.contentDocument,this.virtualDom,u,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const a in this.legacy_missingNodeRetryMap)try{const i=this.legacy_missingNodeRetryMap[a],c=be(i.node,this.mirror,this.virtualDom.mirror);Y(c,i.node,u,this.virtualDom.mirror),i.node=c}catch(i){this.config.showWarning&&console.warn(i)}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null}),this.emitter.on(D.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset()});const o=new wn([],n?.speed||r.speed);this.service=Sn({events:t.map(u=>n&&n.unpackFn?n.unpackFn(u):u).sort((u,a)=>u.timestamp-a.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(u=>{this.emitter.emit(D.StateChange,{player:u})}),this.speedService=Rn({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(u=>{this.emitter.emit(D.StateChange,{speed:u})});const s=this.service.state.context.events.find(u=>u.type===x.Meta),l=this.service.state.context.events.find(u=>u.type===x.FullSnapshot);if(s){const{width:u,height:a}=s.data;setTimeout(()=>{this.emitter.emit(D.Resize,{width:u,height:a})},0)}l&&setTimeout(()=>{this.firstFullSnapshot||(this.firstFullSnapshot=l,this.rebuildFullSnapshot(l),this.iframe.contentWindow.scrollTo(l.data.initialOffset))},1),this.service.state.context.events.find(bt)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,n){return this.emitter.on(t,n),this}off(t,n){return this.emitter.off(t,n),this}setConfig(t){Object.keys(t).forEach(n=>{t[n],this.config[n]=t[n]}),this.config.skipInactive||this.backToNormal(),typeof t.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),typeof t.mouseTail<"u"&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],n=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:n.timestamp,totalTime:n.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:n}=this.service.state.context;return t-n[0].timestamp}getMirror(){return this.mirror}play(t=0){var n,r;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:t}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}})),(r=(n=this.iframe.contentDocument)==null?void 0:n.getElementsByTagName("html")[0])==null||r.classList.remove("rrweb-paused"),this.emitter.emit(D.Start)}pause(t){var n,r;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(r=(n=this.iframe.contentDocument)==null?void 0:n.getElementsByTagName("html")[0])==null||r.classList.add("rrweb-paused"),this.emitter.emit(D.Pause)}resume(t=0){console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(D.Resume)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const n=this.config.unpackFn?this.config.unpackFn(t):t;bt(n)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:n}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Ve()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(En(this.iframe.contentWindow,this.iframe.contentDocument),An(this.iframe.contentWindow))}rebuildFullSnapshot(t,n=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const r=[];zt(t.data.node,{doc:this.iframe.contentDocument,afterAppend:l=>{this.collectIframeAndAttachDocument(r,l)},cache:this.cache,mirror:this.mirror});for(const{mutationInQueue:l,builtNode:u}of r)this.attachDocumentToIframe(l,u),this.newDocumentQueue=this.newDocumentQueue.filter(a=>a!==l);const{documentElement:o,head:s}=this.iframe.contentDocument;this.insertStyleRules(o,s),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(D.FullsnapshotRebuilded,t),n||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,n){const r=kn(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const o=this.virtualDom.createElement("style");this.virtualDom.mirror.add(o,Ke(o,this.virtualDom.unserializedId)),t.insertBefore(o,n);for(let s=0;s<r.length;s++)o.rules.push({cssText:r[s],type:V.Insert,index:s})}else{const o=document.createElement("style");t.insertBefore(o,n);for(let s=0;s<r.length;s++)o.sheet.insertRule(r[s],s)}}attachDocumentToIframe(t,n){const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[];ge(t.node,{doc:n.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:s=>{this.collectIframeAndAttachDocument(o,s);const l=r.getMeta(s);if(l?.type===I.Element&&l?.tagName.toUpperCase()==="HTML"){const{documentElement:u,head:a}=n.contentDocument;this.insertStyleRules(u,a)}},cache:this.cache});for(const{mutationInQueue:s,builtNode:l}of o)this.attachDocumentToIframe(s,l),this.newDocumentQueue=this.newDocumentQueue.filter(u=>u!==s)}collectIframeAndAttachDocument(t,n){if(Se(n,this.mirror)){const r=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(n));r&&t.push({mutationInQueue:r,builtNode:n})}}waitForStylesheetLoad(){var t;const n=(t=this.iframe.contentDocument)==null?void 0:t.head;if(n){const r=new Set;let o,s=this.service.state;const l=()=>{s=this.service.state};this.emitter.on(D.Start,l),this.emitter.on(D.Pause,l);const u=()=>{this.emitter.off(D.Start,l),this.emitter.off(D.Pause,l)};n.querySelectorAll('link[rel="stylesheet"]').forEach(a=>{a.sheet||(r.add(a),a.addEventListener("load",()=>{r.delete(a),r.size===0&&o!==-1&&(s.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(D.LoadStylesheetEnd),o&&clearTimeout(o),u())}))}),r.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(D.LoadStylesheetStart),o=setTimeout(()=>{s.matches("playing")&&this.play(this.getCurrentTime()),o=-1,u()},this.config.loadTimeout))}}preloadAllImages(){return Ae(this,null,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(D.Start,t),this.emitter.on(D.Pause,t);const n=[];for(const r of this.service.state.context.events)r.type===x.IncrementalSnapshot&&r.data.source===R.CanvasMutation&&(n.push(this.deserializeAndPreloadCanvasEvents(r.data,r)),("commands"in r.data?r.data.commands:[r.data]).forEach(o=>{this.preloadImages(o,r)}));return Promise.all(n)})}preloadImages(t,n){if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(n)){const r=document.createElement("canvas"),o=r.getContext("2d"),s=o?.createImageData(r.width,r.height);s?.data,JSON.parse(t.args[0]),o?.putImageData(s,0,0)}}deserializeAndPreloadCanvasEvents(t,n){return Ae(this,null,function*(){if(!this.canvasEventMap.has(n)){const r={isUnchanged:!0};if("commands"in t){const o=yield Promise.all(t.commands.map(s=>Ae(this,null,function*(){const l=yield Promise.all(s.args.map(H(this.imageMap,null,r)));return Re(ie({},s),{args:l})})));r.isUnchanged===!1&&this.canvasEventMap.set(n,Re(ie({},t),{commands:o}))}else{const o=yield Promise.all(t.args.map(H(this.imageMap,null,r)));r.isUnchanged===!1&&this.canvasEventMap.set(n,Re(ie({},t),{args:o}))}}})}applyIncremental(t,n){var r,o,s,l,u,a;const{data:i}=t;switch(i.source){case R.Mutation:{try{this.applyMutation(i,n)}catch(c){this.warn(`Exception in mutation ${c.message||c}`,i)}break}case R.Drag:case R.TouchMove:case R.MouseMove:if(n){const c=i.positions[i.positions.length-1];this.mousePos={x:c.x,y:c.y,id:c.id,debugData:i}}else i.positions.forEach(c=>{const d={doAction:()=>{this.moveAndHover(c.x,c.y,c.id,n,i)},delay:c.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(d)}),this.timer.addAction({doAction(){},delay:t.delay-((r=i.positions[0])==null?void 0:r.timeOffset)});break;case R.MouseInteraction:{if(i.id===-1||n)break;const c=new Event(P[i.type].toLowerCase()),d=this.mirror.getNode(i.id);if(!d)return this.debugNodeNotFound(i,i.id);this.emitter.emit(D.MouseInteraction,{type:i.type,target:d});const{triggerFocus:h}=this.config;switch(i.type){case P.Blur:"blur"in d&&d.blur();break;case P.Focus:h&&d.focus&&d.focus({preventScroll:!0});break;case P.Click:case P.TouchStart:case P.TouchEnd:n?(i.type===P.TouchStart?this.touchActive=!0:i.type===P.TouchEnd&&(this.touchActive=!1),this.mousePos={x:i.x,y:i.y,id:i.id,debugData:i}):(i.type===P.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(i.x,i.y,i.id,n,i),i.type===P.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):i.type===P.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):i.type===P.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case P.TouchCancel:n?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:d.dispatchEvent(c)}break}case R.Scroll:{if(i.id===-1)break;if(this.usingVirtualDom){const c=this.virtualDom.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);c.scrollData=i;break}this.applyScroll(i,n);break}case R.ViewportResize:this.emitter.emit(D.Resize,{width:i.width,height:i.height});break;case R.Input:{if(i.id===-1)break;if(this.usingVirtualDom){const c=this.virtualDom.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);c.inputData=i;break}this.applyInput(i);break}case R.MediaInteraction:{const c=this.usingVirtualDom?this.virtualDom.mirror.getNode(i.id):this.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);const d=c;try{i.currentTime&&(d.currentTime=i.currentTime),i.volume&&(d.volume=i.volume),i.muted&&(d.muted=i.muted),i.type===De.Pause&&d.pause(),i.type===De.Play&&d.play()}catch(h){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${h.message||h}`)}break}case R.StyleSheetRule:{if(this.usingVirtualDom){const c=this.virtualDom.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);const d=c.rules;(o=i.adds)==null||o.forEach(({rule:h,index:f})=>d?.push({cssText:h,index:f,type:V.Insert})),(s=i.removes)==null||s.forEach(({index:h})=>d?.push({index:h,type:V.Remove}))}else{const c=this.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);const d=c.sheet;(l=i.adds)==null||l.forEach(({rule:h,index:f})=>{try{if(Array.isArray(f)){const{positions:E,index:g}=gt(f);ce(d.cssRules,E).insertRule(h,g)}else{const E=f===void 0?void 0:Math.min(f,d.cssRules.length);d.insertRule(h,E)}}catch{}}),(u=i.removes)==null||u.forEach(({index:h})=>{try{if(Array.isArray(h)){const{positions:f,index:E}=gt(h);ce(d.cssRules,f).deleteRule(E||0)}else d?.deleteRule(h)}catch{}})}break}case R.StyleDeclaration:{if(this.usingVirtualDom){const c=this.virtualDom.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);const d=c.rules;i.set&&d.push(ie({type:V.SetProperty,index:i.index},i.set)),i.remove&&d.push(ie({type:V.RemoveProperty,index:i.index},i.remove))}else{const c=this.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);const d=c.sheet;i.set&&ce(d.rules,i.index).style.setProperty(i.set.property,i.set.value,i.set.priority),i.remove&&ce(d.rules,i.index).style.removeProperty(i.remove.property)}break}case R.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const c=this.virtualDom.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);c.canvasMutations.push({event:t,mutation:i})}else{const c=this.mirror.getNode(i.id);if(!c)return this.debugNodeNotFound(i,i.id);Et({event:t,mutation:i,target:c,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case R.Font:{try{const c=new FontFace(i.family,i.buffer?new Uint8Array(JSON.parse(i.fontSource)):i.fontSource,i.descriptors);(a=this.iframe.contentDocument)==null||a.fonts.add(c)}catch(c){this.config.showWarning&&console.warn(c)}break}}}applyMutation(t,n){if(this.config.useVirtualDom&&!this.usingVirtualDom&&n&&(this.usingVirtualDom=!0,gn(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const i in this.legacy_missingNodeRetryMap)try{const c=this.legacy_missingNodeRetryMap[i],d=Je(c.node,this.virtualDom,this.mirror);d&&(c.node=d)}catch(c){this.config.showWarning&&console.warn(c)}const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(i=>{var c;const d=r.getNode(i.id);if(!d)return t.removes.find(f=>f.id===i.parentId)?void 0:this.warnNodeNotFound(t,i.id);let h=r.getNode(i.parentId);if(!h)return this.warnNodeNotFound(t,i.parentId);if(i.isShadow&&ft(h)&&(h=h.shadowRoot),r.removeNodeFromMap(d),h)try{h.removeChild(d),this.usingVirtualDom&&d.nodeName==="#text"&&h.nodeName==="STYLE"&&((c=h.rules)==null?void 0:c.length)>0&&(h.rules=[])}catch(f){if(f instanceof DOMException)this.warn("parent could not remove child in mutation",h,d,t);else throw f}});const o=ie({},this.legacy_missingNodeRetryMap),s=[],l=i=>{let c=null;return i.nextId&&(c=r.getNode(i.nextId)),i.nextId!==null&&i.nextId!==void 0&&i.nextId!==-1&&!c},u=i=>{var c;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let d=r.getNode(i.parentId);if(!d)return i.node.type===I.Document?this.newDocumentQueue.push(i):s.push(i);i.node.isShadow&&(ft(d)||d.attachShadow({mode:"open"}),d=d.shadowRoot);let h=null,f=null;if(i.previousId&&(h=r.getNode(i.previousId)),i.nextId&&(f=r.getNode(i.nextId)),l(i))return s.push(i);if(i.node.rootId&&!r.getNode(i.node.rootId))return;const E=i.node.rootId?r.getNode(i.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Se(d,r)){this.attachDocumentToIframe(i,d);return}const g=ge(i.node,{doc:E,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache});if(i.previousId===-1||i.nextId===-1){o[i.node.id]={node:g,mutation:i};return}const y=r.getMeta(d);if(y&&y.type===I.Element&&y.tagName==="textarea"&&i.node.type===I.Text){const p=Array.isArray(d.childNodes)?d.childNodes:Array.from(d.childNodes);for(const N of p)N.nodeType===d.TEXT_NODE&&d.removeChild(N)}if(h&&h.nextSibling&&h.nextSibling.parentNode)d.insertBefore(g,h.nextSibling);else if(f&&f.parentNode)d.contains(f)?d.insertBefore(g,f):d.insertBefore(g,null);else{if(d===E)for(;E.firstChild;)E.removeChild(E.firstChild);d.appendChild(g)}if(this.usingVirtualDom&&g.nodeName==="#text"&&d.nodeName==="STYLE"&&((c=d.rules)==null?void 0:c.length)>0&&(d.rules=[]),Se(g,this.mirror)){const p=this.mirror.getId(g),N=this.newDocumentQueue.find(w=>w.parentId===p);N&&(this.attachDocumentToIframe(N,g),this.newDocumentQueue=this.newDocumentQueue.filter(w=>w!==N))}(i.previousId||i.nextId)&&this.legacy_resolveMissingNode(o,d,g,i)};t.adds.forEach(i=>{u(i)});const a=Date.now();for(;s.length;){const i=In(s);if(s.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",i);break}for(const c of i)r.getNode(c.value.parentId)?mt(c,d=>{u(d)}):this.debug("Drop resolve tree since there is no parent for the root node.",c)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),On(t.texts).forEach(i=>{var c;const d=r.getNode(i.id);if(!d)return t.removes.find(h=>h.id===i.id)?void 0:this.warnNodeNotFound(t,i.id);if(d.textContent=i.value,this.usingVirtualDom){const h=d.parentNode;((c=h?.rules)==null?void 0:c.length)>0&&(h.rules=[])}}),t.attributes.forEach(i=>{const c=r.getNode(i.id);if(!c)return t.removes.find(d=>d.id===i.id)?void 0:this.warnNodeNotFound(t,i.id);for(const d in i.attributes)if(typeof d=="string"){const h=i.attributes[d];if(h===null)c.removeAttribute(d);else if(typeof h=="string")try{c.setAttribute(d,h)}catch(f){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",f)}else if(d==="style"){const f=h,E=c;for(const g in f)if(f[g]===!1)E.style.removeProperty(g);else if(f[g]instanceof Array){const y=f[g];E.style.setProperty(g,y[0],y[1])}else{const y=f[g];E.style.setProperty(g,y)}}}})}applyScroll(t,n){const r=this.mirror.getNode(t.id);if(!r)return this.debugNodeNotFound(t,t.id);const o=this.mirror.getMeta(r);if(r===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else if(o?.type===I.Document)r.defaultView.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else try{r.scrollTop=t.y,r.scrollLeft=t.x}catch{}}applyInput(t){const n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);try{n.checked=t.isChecked,n.value=t.text}catch{}}legacy_resolveMissingNode(t,n,r,o){const{previousId:s,nextId:l}=o,u=s&&t[s],a=l&&t[l];if(u){const{node:i,mutation:c}=u;n.insertBefore(i,r),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,i,c)}if(a){const{node:i,mutation:c}=a;n.insertBefore(i,r.nextSibling),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,i,c)}}moveAndHover(t,n,r,o,s){const l=this.mirror.getNode(r);if(!l)return this.debugNodeNotFound(s,r);const u=pt(l,this.iframe),a=t*u.absoluteScale+u.x,i=n*u.absoluteScale+u.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${i}px`,o||this.drawMouseTail({x:a,y:i}),this.hoverElements(l)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:n,lineWidth:r,strokeStyle:o,duration:s}=this.config.mouseTail===!0?Oe:Object.assign({},Oe,this.config.mouseTail),l=()=>{if(!this.mouseTail)return;const u=this.mouseTail.getContext("2d");!u||!this.tailPositions.length||(u.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),u.beginPath(),u.lineWidth=r,u.lineCap=n,u.strokeStyle=o,u.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(a=>u.lineTo(a.x,a.y)),u.stroke())};this.tailPositions.push(t),l(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(u=>u!==t),l()},s/this.speedService.state.context.timer.speed)}hoverElements(t){var n;(n=this.iframe.contentDocument)==null||n.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")});let r=t;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(t){return t.type!==x.IncrementalSnapshot?!1:t.data.source>R.Mutation&&t.data.source<=R.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(D.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,n){this.warn(`Node with id '${n}' not found. `,t)}warnCanvasMutationFailed(t,n){this.warn("Has error on canvas update",n,"canvas mutation:",t)}debugNodeNotFound(t,n){this.debug(Ie,`Node with id '${n}' not found. `,t)}warn(...t){!this.config.showWarning||console.warn(Ie,...t)}debug(...t){!this.config.showDebug||console.log(Ie,...t)}}var B=Uint8Array,X=Uint16Array,ke=Uint32Array,Dt=new B([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mt=new B([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zn=new B([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ct=function(e,t){for(var n=new X(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new ke(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)o[s]=s-n[r]<<5|r;return[n,o]},xt=Ct(Dt,2),St=xt[0],er=xt[1];St[28]=258,er[258]=28;for(var tr=Ct(Mt,0),nr=tr[0],_e=new X(32768),C=0;C<32768;++C){var Q=(C&43690)>>>1|(C&21845)<<1;Q=(Q&52428)>>>2|(Q&13107)<<2,Q=(Q&61680)>>>4|(Q&3855)<<4,_e[C]=((Q&65280)>>>8|(Q&255)<<8)>>>1}for(var de=function(e,t,n){for(var r=e.length,o=0,s=new X(t);o<r;++o)++s[e[o]-1];var l=new X(t);for(o=0;o<t;++o)l[o]=l[o-1]+s[o-1]<<1;var u;if(n){u=new X(1<<t);var a=15-t;for(o=0;o<r;++o)if(e[o])for(var i=o<<4|e[o],c=t-e[o],d=l[e[o]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)u[_e[d]>>>a]=i}else for(u=new X(r),o=0;o<r;++o)u[o]=_e[l[e[o]-1]++]>>>15-e[o];return u},he=new B(288),C=0;C<144;++C)he[C]=8;for(var C=144;C<256;++C)he[C]=9;for(var C=256;C<280;++C)he[C]=7;for(var C=280;C<288;++C)he[C]=8;for(var Rt=new B(32),C=0;C<32;++C)Rt[C]=5;var rr=de(he,9,1),or=de(Rt,5,1),Le=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},G=function(e,t,n){var r=t/8>>0;return(e[r]|e[r+1]<<8)>>>(t&7)&n},Fe=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(t&7)},ir=function(e){return(e/8>>0)+(e&7&&1)},At=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof X?X:e instanceof ke?ke:B)(n-t);return r.set(e.subarray(t,n)),r},sr=function(e,t,n){var r=e.length,o=!t||n,s=!n||n.i;n||(n={}),t||(t=new B(r*3));var l=function(kt){var _t=t.length;if(kt>_t){var Lt=new B(Math.max(_t*2,kt));Lt.set(t),t=Lt}},u=n.f||0,a=n.p||0,i=n.b||0,c=n.l,d=n.d,h=n.m,f=n.n,E=r*8;do{if(!c){n.f=u=G(e,a,1);var g=G(e,a+1,3);if(a+=3,g)if(g==1)c=rr,d=or,h=9,f=5;else if(g==2){var w=G(e,a,31)+257,O=G(e,a+10,15)+4,L=w+G(e,a+5,31)+1;a+=14;for(var k=new B(L),$=new B(19),_=0;_<O;++_)$[Zn[_]]=G(e,a+_*3,7);a+=O*3;var Z=Le($),me=(1<<Z)-1;if(!s&&a+L*(Z+7)>E)break;for(var pe=de($,Z,1),_=0;_<L;){var q=pe[G(e,a,me)];a+=q&15;var y=q>>>4;if(y<16)k[_++]=y;else{var j=0,J=0;for(y==16?(J=3+G(e,a,3),a+=2,j=k[_-1]):y==17?(J=3+G(e,a,7),a+=3):y==18&&(J=11+G(e,a,127),a+=7);J--;)k[_++]=j}}var se=k.subarray(0,w),U=k.subarray(w);h=Le(se),f=Le(U),c=de(se,h,1),d=de(U,f,1)}else throw"invalid block type";else{var y=ir(a)+4,p=e[y-4]|e[y-3]<<8,N=y+p;if(N>r){if(s)throw"unexpected EOF";break}o&&l(i+p),t.set(e.subarray(y,N),i),n.b=i+=p,n.p=a=N*8;continue}if(a>E)throw"unexpected EOF"}o&&l(i+131072);for(var A=(1<<h)-1,ee=(1<<f)-1,v=h+f+18;s||a+v<E;){var j=c[Fe(e,a)&A],m=j>>>4;if(a+=j&15,a>E)throw"unexpected EOF";if(!j)throw"invalid length/literal";if(m<256)t[i++]=m;else if(m==256){c=null;break}else{var b=m-254;if(m>264){var _=m-257,M=Dt[_];b=G(e,a,(1<<M)-1)+St[_],a+=M}var F=d[Fe(e,a)&ee],K=F>>>4;if(!F)throw"invalid distance";a+=F&15;var U=nr[K];if(K>3){var M=Mt[K];U+=Fe(e,a)&(1<<M)-1,a+=M}if(a>E)throw"unexpected EOF";o&&l(i+131072);for(var Ot=i+b;i<Ot;i+=4)t[i]=t[i-U],t[i+1]=t[i+1-U],t[i+2]=t[i+2-U],t[i+3]=t[i+3-U];i=Ot}}n.l=c,n.p=a,n.b=i,c&&(u=1,n.m=h,n.d=d,n.n=f)}while(!u);return i==t.length?t:At(t,0,i)},ar=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function lr(e,t){return sr((ar(e),e.subarray(2,-4)),t)}function cr(e,t){var n=e.length;if(!t&&typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var r=new B(e.length+(e.length>>>1)),o=0,s=function(i){r[o++]=i},l=0;l<n;++l){if(o+5>r.length){var u=new B(o+8+(n-l<<1));u.set(r),r=u}var a=e.charCodeAt(l);a<128||t?s(a):a<2048?(s(192|a>>>6),s(128|a&63)):a>55295&&a<57344?(a=65536+(a&1047552)|e.charCodeAt(++l)&1023,s(240|a>>>18),s(128|a>>>12&63),s(128|a>>>6&63),s(128|a&63)):(s(224|a>>>12),s(128|a>>>6&63),s(128|a&63))}return At(r,0,o)}function ur(e,t){var n="";if(!t&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var r=0;r<e.length;){var o=e[r++];o<128||t?n+=String.fromCharCode(o):o<224?n+=String.fromCharCode((o&31)<<6|e[r++]&63):o<240?n+=String.fromCharCode((o&15)<<12|(e[r++]&63)<<6|e[r++]&63):(o=((o&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,n+=String.fromCharCode(55296|o>>10,56320|o&1023))}return n}const It="v1",dr=e=>{if(typeof e!="string")return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch{}try{const t=JSON.parse(ur(lr(cr(e,!0))));if(t.v===It)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer ${It}.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};return fe.Replayer=Kn,fe.unpack=dr,Object.defineProperty(fe,"__esModule",{value:!0}),fe}({});
//# sourceMappingURL=rrweb-replay-unpack.min.js.map
